(this["webpackJsonpsales-management-system-fe"]=this["webpackJsonpsales-management-system-fe"]||[]).push([[0],{122:function(e,t,a){e.exports=a(226)},131:function(e,t,a){},226:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),l=a.n(c),s=a(22);a(131),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=a(45),i=a(113),m=a.n(i),d=a(114),u=a(115),p=a(17),b=a(18),f=a(21),E=a(19),h=a(20),g=a(34),v=a(49),N=a(116),y=a(8),w=a(51),O=a.n(w),j="".concat("/auth","/login"),_="".concat("/auth","/logout");"".concat("/employees","/employee-password-reset");function S(e){var t=e.split("/");return t.length>3?"/"+t[1]+"/"+t[2]:e}function k(e){try{JSON.parse(e)}catch(t){return!1}return!0}var C={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,a,n,r,c,l,s,o="",i=0;for(e=C._utf8_encode(e);i<e.length;)r=(t=e.charCodeAt(i++))>>2,c=(3&t)<<4|(a=e.charCodeAt(i++))>>4,l=(15&a)<<2|(n=e.charCodeAt(i++))>>6,s=63&n,isNaN(a)?l=s=64:isNaN(n)&&(s=64),o=o+this._keyStr.charAt(r)+this._keyStr.charAt(c)+this._keyStr.charAt(l)+this._keyStr.charAt(s);return o},decode:function(e){var t,a,n,r,c,l,s="",o=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");o<e.length;)t=this._keyStr.indexOf(e.charAt(o++))<<2|(r=this._keyStr.indexOf(e.charAt(o++)))>>4,a=(15&r)<<4|(c=this._keyStr.indexOf(e.charAt(o++)))>>2,n=(3&c)<<6|(l=this._keyStr.indexOf(e.charAt(o++))),s+=String.fromCharCode(t),64!=c&&(s+=String.fromCharCode(a)),64!=l&&(s+=String.fromCharCode(n));return s=C._utf8_decode(s)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",a=0;a<e.length;a++){var n=e.charCodeAt(a);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},_utf8_decode:function(e){for(var t="",a=0,n=0,r=0,c=0;a<e.length;)(n=e.charCodeAt(a))<128?(t+=String.fromCharCode(n),a++):n>191&&n<224?(c=e.charCodeAt(a+1),t+=String.fromCharCode((31&n)<<6|63&c),a+=2):(c=e.charCodeAt(a+1),r=e.charCodeAt(a+2),t+=String.fromCharCode((15&n)<<12|(63&c)<<6|63&r),a+=3);return t}},x=a(9),A=a.n(x),D="".concat("http","://").concat("18.188.236.142",":").concat("4000"),T="".concat(D,"/api"),R="".concat(T,"/product-types"),P="".concat(T,"/products-with-type-id"),I="".concat(T,"/new-order"),M="".concat(T,"/all-orders"),B="".concat(T,"/add-order-payment"),U="".concat(T,"/update-date"),L="".concat(T,"/add-employee"),z="".concat(T,"/all-employees"),F="".concat(T,"/get-vehicle-list"),Y="".concat(T,"/get-expenses"),q="".concat(T,"/order-detail"),J="".concat(T,"/generate-pdf"),H="".concat(T,"/cancel-order"),W="".concat(T,"/employee-totals"),V="".concat(T,"/generate-cash-report-pdf"),K=("".concat(T,"/generate-ledger-pdf"),"".concat(T,"/accounts/user")),G="".concat(T,"/change-password"),Q="".concat(T,"/set-vat"),X="".concat(T,"/get-vat"),Z="".concat(T,"/set-starting-order-number"),$="".concat(T,"/get-starting-order-number"),ee="".concat(T,"/add-expense"),te="".concat(D,"/auth"),ae="".concat(te,"/signin");A.a.interceptors.request.use((function(e){if(k(sessionStorage.getItem("user"))){var t=JSON.parse(sessionStorage.getItem("user"));return t&&(e.headers.Authorization="Bearer ".concat(t.jwt_token)),e}})),A.a.interceptors.response.use((function(e){return""===e.data&&(e.data=[]),e}));var ne=[{id:0,name:"All Months"},{id:1,name:"January"},{id:2,name:"February"},{id:3,name:"March"},{id:4,name:"April"},{id:5,name:"May"},{id:6,name:"June"},{id:7,name:"July"},{id:8,name:"August"},{id:9,name:"September"},{id:10,name:"October"},{id:11,name:"November"},{id:12,name:"December"}],re=[{value:5,label:"5"},{value:10,label:"10"},{value:20,label:"20"},{value:50,label:"50"},{value:100,label:"100"}],ce={a:"#2196f3",b:"#ec407a",c:"#ff9800",d:"#66bb6a",e:"#5c6bc0",f:"#ef5350",g:"#8d6e63",h:"#26a59a",i:"#ff9b12",j:"#343434",k:"#39589e",l:"#7886cb",m:"#26a59a",n:"#6A1B9A",o:"#283593",p:"#5C6BC0",q:"#4db6ab",r:"#444444",s:"#888888",t:"#37474F",u:"#4E342E",v:"#FF7043",w:"#263238",x:"#009688",y:"#00bcd4",z:"#8BC34A"},le=["/auth/login","/auth/logout","/","/dashboard-employee","/dashboard-domainhead","/dashboard-admin","/new-order","/all-orders","/expense","/employees","/employees/add-employee","/employees/edit-employee","/add-employee","/configurations","/settings","/error404"],se=le,oe=["Vehicle","Petrol","Food","Cash Purchase","Salary","Other"],ie=["By Day","By Month","By Year"],me=["Bank","Self"],de=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(f.a)(this,Object(E.a)(t).call(this,e))).state={validToken:!1},a.isAuthorizedRoute=a.isAuthorizedRoute.bind(Object(y.a)(a)),a.CheckForToken=a.isUserLoggedIn.bind(Object(y.a)(a)),a}return Object(h.a)(t,e),Object(b.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){if(O.a.isEmpty(this.props.activeUser.user)&&k(sessionStorage.getItem("user"))){var e=JSON.parse(sessionStorage.getItem("user"));e&&"string"!==typeof e&&this.props.fetchUser(e)}}},{key:"isAuthorizedRoute",value:function(){var e=S(this.props.path),t=[];t=se,this.props.activeUser.user.permissions&&(t=this.props.activeUser.user.permissions);var a=t.indexOf(e);return"*"==e||a>=0}},{key:"isLoginPath",value:function(){return"/auth/login"==S(this.props.path)}},{key:"checkFor404",value:function(){return"/error404"==S(this.props.path)}},{key:"isUserLoggedIn",value:function(){if(k(sessionStorage.getItem("user"))){var e=JSON.parse(sessionStorage.getItem("user"));if(e&&"string"!==typeof e&&"empID"in e&&"jwt_token"in e)return!0}return!1}},{key:"render",value:function(){var e=this.props,t=e.component,a=Object(N.a)(e,["component"]),n="";return this.isUserLoggedIn()?O.a.isEmpty(this.props.activeUser.user)||("message"in this.props.activeUser.user?(sessionStorage.removeItem("user"),n=r.a.createElement(v.b,Object.assign({},a,{render:function(e){return r.a.createElement(v.a,{to:j})}}))):n=this.isLoginPath()?r.a.createElement(v.b,Object.assign({},a,{render:function(e){return r.a.createElement(v.a,{to:"/"})}})):this.isAuthorizedRoute()?r.a.createElement(v.b,Object.assign({},a,{render:function(e){return r.a.createElement(t,e)}})):r.a.createElement(v.b,Object.assign({},a,{render:function(e){return r.a.createElement(v.a,{to:"/error404"})}}))):(sessionStorage.removeItem("user"),n=this.isLoginPath()?r.a.createElement(v.b,Object.assign({},a,{render:function(e){return r.a.createElement(t,e)}})):r.a.createElement(v.b,Object.assign({},a,{render:function(e){return r.a.createElement(v.a,{to:j})}}))),n}}]),t}(n.Component);var ue=Object(s.b)((function(e){return{activeUser:e.activeUser}}),{fetchUser:function(e){return A.a.defaults.timeout=8e4,A.a.defaults.withCredentials=!0,function(t){A()({method:"get",url:"".concat(K,"/").concat(e.empID)}).then((function(e){200===e.status?!0===e.data.success?t({type:"save_user",payload:e}):sessionStorage.removeItem("user"):console.log("Network Error")})).catch((function(e){sessionStorage.removeItem("user");var a=e.response;void 0===a&&(a={data:{message:"Network Error"}}),t({type:"save_user",payload:a})}))}}})(de),pe=a(117),be=a.n(pe),fe=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(f.a)(this,Object(E.a)(t).call(this,e))).state={username:"",password:"",error:"",startAnimationSpinner:!1,startAnimationError:!1,modalIsOpen:!1,recoveryEmail:"",isRecoveringPassword:!1,recoveryEmailError:!1},a}return Object(h.a)(t,e),Object(b.a)(t,[{key:"onLogin",value:function(){if(""!==this.state.username.trim()&&""!==this.state.password){this.setState({startAnimationSpinner:!0});var e=C.encode(this.state.username.trim()),t=C.encode(this.state.password),a="grant_type=password&username=".concat(e,"&password=").concat(t);this.props.login(a)}else this.setState({error:"Username & Password must be provided."})}},{key:"closeModal",value:function(){this.setState({modalIsOpen:!1,recoveryEmailError:!1})}},{key:"openModal",value:function(){this.setState({modalIsOpen:!0})}},{key:"onUsernameChange",value:function(e){this.setState({username:e.target.value})}},{key:"onPasswordChange",value:function(e){this.setState({password:e.target.value})}},{key:"handleChange",value:function(e){var t=this.checkForRecoveryEmail(e.target.value);this.setState({recoveryEmail:e.target.value,recoveryEmailError:t})}},{key:"checkForRecoveryEmail",value:function(e){var t=!1;return""===e.trim()&&(t=!0),t}},{key:"checkForLoggedUser",value:function(){return null!==sessionStorage.getItem("user")}},{key:"animationEndError",value:function(){this.setState({startAnimationError:!1})}},{key:"UNSAFE_componentWillMount",value:function(){var e=this.props.activeUser;e.message&&"Network Error"===e.message&&this.setState({error:"Network Error!",startAnimationSpinner:!1,startAnimationError:!0})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.activeUser;if(t.message){if("Network Error"===t.message)this.setState({error:"Network Error!",startAnimationSpinner:!1,startAnimationError:!0}),this.refs.errorAnimation.addEventListener("animationend",this.animationEndError.bind(this));else if("Something Went Wrong"===t.message){this.setState({error:"Something Went Wrong!",startAnimationSpinner:!1,startAnimationError:!0}),this.refs.errorAnimation.addEventListener("animationend",this.animationEndError.bind(this))}}else if(!this.checkForLoggedUser())if(t.error){"error_description"in t?this.setState({error:t.error_description,startAnimationSpinner:!1,startAnimationError:!0}):this.setState({error:t.error,startAnimationSpinner:!1,startAnimationError:!0}),this.refs.errorAnimation.addEventListener("animationend",this.animationEndError.bind(this))}else{var a=t.user;sessionStorage.setItem("user",JSON.stringify(a)),this.setState({username:"",password:"",startAnimationSpinner:!1}),this.props.history.push("/")}}},{key:"_handleKeyPress",value:function(e){"Enter"===e.key&&this.onLogin()}},{key:"onRecoverEmail",value:function(){var e=this.checkForRecoveryEmail(this.state.recoveryEmail);e&&this.setState({recoveryEmailError:e})}},{key:"render",value:function(){var e="";this.state.startAnimationError&&(e="animated fadeIn");var t="";this.state.recoveryEmailError&&(t=r.a.createElement("div",{className:"alert alert-danger alert-styled-left alert-arrow-left "},"Enter your email to reset the password."));var a=r.a.createElement(be.a,{visible:this.state.modalIsOpen,onClickBackdrop:this.closeModal.bind(this),dialogClassName:"modal-sm"},r.a.createElement("div",{className:"card mb-0"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"text-center mb-3"},r.a.createElement("i",{className:"icon-spinner11 icon-2x text-warning border-warning border-3 rounded-round p-3 mb-3 mt-1"}),r.a.createElement("h5",{className:"mb-0"},"Password recovery"),r.a.createElement("span",{className:"d-block text-muted"},"We'll send you instructions in email")),t,r.a.createElement("div",{className:"form-group form-group-feedback form-group-feedback-right"},r.a.createElement("input",{type:"email",className:"form-control",placeholder:"Your email",value:this.state.recoveryEmail,onChange:this.handleChange.bind(this)}),r.a.createElement("div",{className:"form-control-feedback"},r.a.createElement("i",{className:"icon-mail5 text-muted"}))),r.a.createElement("button",{className:"btn bg-blue btn-block",disabled:this.state.isRecoveringPassword,onClick:this.onRecoverEmail.bind(this)},r.a.createElement("i",{className:this.state.isRecoveringPassword?"icon-spinner11 spinner mr-2":"icon-spinner11 mr-2"})," ",this.state.isRecoveringPassword?"Resetting...":"Reset password"))));return r.a.createElement("div",{className:"virtual-body"},a,r.a.createElement("div",{className:"page-content color-login bgc-theme",style:{background:"url(/assets/images/bg-login.jpg) no-repeat",backgroundSize:"cover"}},r.a.createElement("div",{className:"content-wrapper"},r.a.createElement("div",{className:"content d-flex justify-content-center align-items-center"},r.a.createElement("div",{className:"login-form"},r.a.createElement("div",{className:"card mb-0"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"text-center mb-3"},r.a.createElement("a",null,r.a.createElement("img",{src:"/assets/images/logo.png",className:"img-fluid login-image c-width-70 mb-4",style:{backgroundSize:"cover"}})),r.a.createElement("h5",{className:"mb-0 color-login"},"Login to your account"),r.a.createElement("span",{className:"d-block text-muted"},"Your credentials")),r.a.createElement("div",{ref:"errorAnimation",className:""===this.state.error?"alert alert-danger alert-styled-left alert-arrow-left hide-container":"alert alert-danger alert-styled-left alert-arrow-left ".concat(e)},this.state.error),r.a.createElement("div",{className:"form-group form-group-feedback form-group-feedback-left"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Username",onKeyPress:this._handleKeyPress.bind(this),value:this.state.username,onChange:this.onUsernameChange.bind(this)}),r.a.createElement("div",{className:"form-control-feedback"},r.a.createElement("i",{className:"icon-user text-muted"}))),r.a.createElement("div",{className:"form-group form-group-feedback form-group-feedback-left"},r.a.createElement("input",{type:"password",className:"form-control",placeholder:"Password",onKeyPress:this._handleKeyPress.bind(this),value:this.state.password,onChange:this.onPasswordChange.bind(this)}),r.a.createElement("div",{className:"form-control-feedback"},r.a.createElement("i",{className:"icon-lock2 text-muted"}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{onClick:this.onLogin.bind(this),disabled:!!this.state.startAnimationSpinner,className:"btn btn-login btn-block"},this.state.startAnimationSpinner?"Authenticating":"Login"," ",r.a.createElement("i",{className:this.state.startAnimationSpinner?"fas fa-spinner fa-spin ml-2":"icon-circle-right2 ml-2"}))))))))))}}]),t}(n.Component);var Ee=Object(s.b)((function(e){return{activeUser:e.activeUser}}),{login:function(e){return function(t){A.a.defaults.withCredentials=!0,A()({method:"post",url:ae,data:e,headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"}}).then((function(e){200===e.status?t({type:"save_user",payload:e}):console.log("Network Error")})).catch((function(e){var a=e.response;void 0===a&&(a={data:{message:"Network Error"}}),t({type:"save_user",payload:a})}))}}})(fe),he=function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(b.a)(t,[{key:"UNSAFE_componentWillMount",value:function(){sessionStorage.removeItem("user"),this.props.history.push(j)}},{key:"render",value:function(){var e=r.a.createElement("div",{className:"container-fluid",style:{marginTop:"20%"}},r.a.createElement("div",{className:"row btn-col"},r.a.createElement("div",{className:"col-5"}),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"w-25 ma2 h4 items-center justify-center flex flex-column flex-wrap"},"Loading...")),r.a.createElement("div",{className:"col-5"})));return r.a.createElement("div",null,e)}}]),t}(n.Component),ge=Object(v.g)(he),ve=a(3),Ne=a(29),ye=window.$,we=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(f.a)(this,Object(E.a)(t).call(this,e))).state={notifications:[],loadingNotifications:!1,quote:null},a}return Object(h.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){ye(".sidebar-main-toggle").on("click",(function(e){e.preventDefault(),ye("body").toggleClass("sidebar-xs").removeClass("sidebar-mobile-main")})),ye(".sidebar-mobile-main-toggle").on("click",(function(e){e.preventDefault(),ye("body").toggleClass("sidebar-mobile-main").removeClass("sidebar-mobile-secondary sidebar-mobile-right"),ye(".sidebar-main").hasClass("sidebar-fullscreen")&&ye(".sidebar-main").removeClass("sidebar-fullscreen")})),ye(".sidebar-mobile-expand").on("click",(function(e){e.preventDefault();var t=ye(this).parents(".sidebar");t.hasClass("sidebar-fullscreen")?t.removeClass("sidebar-fullscreen"):t.addClass("sidebar-fullscreen")}))}},{key:"getNotifications",value:function(){}},{key:"makeQuoteData",value:function(e){var t="";return""!==e&&"content"in e&&e.content&&((t={}).content=e.content,t.author="author"in e&&e.author?e.author:"Unknown"),t}},{key:"componentWillUnmount",value:function(){clearInterval(this.timeout)}},{key:"logout",value:function(){sessionStorage.removeItem("user"),this.props.history.push(j)}},{key:"changePassword",value:function(){this.props.history.push("/change-password")}},{key:"render",value:function(){var e=this.props.activeUser.user,t="",a="...";if(Object.keys(e).length){e.profile_picture;var n=""===e.first_name||null===e.first_name?"---":e.first_name.charAt(0).toLowerCase(),c={backgroundColor:ce[n]};t=r.a.createElement("button",{className:"btn rounded-round btn-icon btn-sm",style:c},r.a.createElement("span",{className:"letter-icon text-uppercase text-white"},n)),a=e.first_name}var l=""+"/assets/images/".concat("iai","/header.png"),s=""+"/assets/images/".concat("iai","/headerbar.png"),o={backgroundPosition:"left top",backgroundRepeatX:"repeat",backgroundImage:"url(".concat(s,")")};return r.a.createElement("div",{className:"navbar navbar-expand-md navbar-dark fixed-top bgc-theme noprint",style:o},r.a.createElement("div",{className:"navbar-brand wmin-200 c-nav-brand"},r.a.createElement("a",{href:"/",className:"d-inline-block"},r.a.createElement("img",{src:l,alt:""}))),r.a.createElement("div",{className:"d-md-none"},r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbar-mobile"},r.a.createElement("i",{className:"icon-tree5"})),r.a.createElement("button",{className:"navbar-toggler sidebar-mobile-main-toggle",type:"button"},r.a.createElement("i",{className:"icon-paragraph-justify3"}))),r.a.createElement("div",{className:"collapse navbar-collapse c_navbar-collapse",id:"navbar-mobile"},r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{href:"#",className:"navbar-nav-link sidebar-control sidebar-main-toggle d-none d-md-block"},r.a.createElement("i",{className:"icon-paragraph-justify3"})))),r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item dropdown dropdown-user text-capitalize"},r.a.createElement("a",{href:"#",className:"navbar-nav-link dropdown-toggle","data-toggle":"dropdown"},t,r.a.createElement("span",null,a)),r.a.createElement("div",{className:"dropdown-menu dropdown-menu-right"},r.a.createElement("a",{className:"dropdown-item",onClick:this.changePassword.bind(this)},r.a.createElement(Ne.a,{icon:["fas","unlock"],className:"mr-2"}),"Change Password"),r.a.createElement("div",{className:"dropdown-divider"}),r.a.createElement("a",{className:"dropdown-item",onClick:this.logout.bind(this)},r.a.createElement("i",{className:"icon-switch2"})," Logout"))))))}}]),t}(n.Component);var Oe,je=Object(s.b)((function(e){return{activeUser:e.activeUser}}))(Object(v.g)(we)),_e=function(e){function t(e){return Object(p.a)(this,t),Object(f.a)(this,Object(E.a)(t).call(this,e))}return Object(h.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"page-header page-header-light noprint"},r.a.createElement("div",{className:"page-header-content header-elements-md-inline"},r.a.createElement("div",{className:"page-title"},r.a.createElement("h4",null,r.a.createElement("span",{className:"font-weight-semibold"},this.props.header)))))}}]),t}(n.Component),Se=a(30),ke=(Oe={},Object(Se.a)(Oe,"/",{"/":{id:"M_LOAD_APP",name:"Dashboard",url:"/",fa_icon:["fas","home"]},fa_icon:["fas","home"]}),Object(Se.a)(Oe,"/new-order",{"/":{id:"NEW_ORDER",name:"New Job Order",url:"/new-order",fa_icon:["fas","cart-plus"]},fa_icon:["fas","cart-plus"]}),Object(Se.a)(Oe,"/expense",{"/":{id:"M_LOAD_APP",name:"Expenses",url:"/expense",fa_icon:["fas","money-bill-wave"]},fa_icon:["fas","money-bill-wave"]}),Object(Se.a)(Oe,"/all-orders",{"/":{id:"ALL_ORDERS",name:"All Orders",url:"/all-orders",fa_icon:["fas","search"]},fa_icon:["fas","search"]}),Object(Se.a)(Oe,"/add-employee",{"/":{id:"M_ADD_EMPLOYEE",name:"Add Employee",url:"/add-employee",fa_icon:["fas","user-plus"]},fa_icon:["fas","user-plus"]}),Object(Se.a)(Oe,"/settings",{"/":{id:"M_SETTINGS",name:"Settings",url:"/settings",fa_icon:["fas","cogs"]},fa_icon:["fas","cogs"]}),Oe),Ce=window.$,xe=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(f.a)(this,Object(E.a)(t).call(this,e))).state={nav_items:[],render_key:"__render__",fa_icon:"fa_icon"},a.checkCurrentURL=a.checkCurrentURL.bind(Object(y.a)(a)),a.__build_render_dictionary=a.__build_render_dictionary.bind(Object(y.a)(a)),a.__render=a.__render.bind(Object(y.a)(a)),a.__render_single=a.__render_single.bind(Object(y.a)(a)),a.__render_group=a.__render_group.bind(Object(y.a)(a)),a.__render_dictionary=a.__render_dictionary.bind(Object(y.a)(a)),a.__render_mobile_navigator=a.__render_mobile_navigator.bind(Object(y.a)(a)),a}return Object(h.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){Ce(".nav-sidebar").each((function(){Ce(this).find(".nav-item").has(".nav-group-sub").children(".nav-item > .nav-link").not(".disabled").on("click",(function(e){e.preventDefault();var t=Ce(this),a=Ce(".sidebar-xs").not(".sidebar-mobile-main").find(".sidebar-main .nav-sidebar").children(".nav-item");t.parent(".nav-item").hasClass("nav-item-open")?t.parent(".nav-item").not(a).removeClass("nav-item-open").children(".nav-group-sub").slideUp(250):t.parent(".nav-item").not(a).addClass("nav-item-open").children(".nav-group-sub").slideDown(250),"accordion"===t.parents(".nav-sidebar").data("nav-type")&&t.parent(".nav-item").not(a).siblings(":has(.nav-group-sub)").removeClass("nav-item-open").children(".nav-group-sub").slideUp(250)}))})),Ce(document).on("click",".nav-sidebar .disabled",(function(e){e.preventDefault()})),Ce(".nav-scrollspy").find(".nav-item").has(".nav-group-sub").children(".nav-item > .nav-link").off("click"),Ce(document).on("click",".dropdown-content",(function(e){e.stopPropagation()})),Ce(".navbar-nav .disabled a, .nav-item-levels .disabled").on("click",(function(e){e.preventDefault(),e.stopPropagation()})),Ce('.dropdown-content a[data-toggle="tab"]').on("click",(function(e){Ce(this).tab("show")}))}},{key:"getPermissions",value:function(e){var t=[];return le.map((function(a,n){e.map((function(e,n){a===e&&t.push(e)}))})),t}},{key:"checkCurrentURL",value:function(){var e=this.props.location.pathname.split("/"),t={};return e.length>2?(t.whoIsOpen=e[1],t.whoIsActive="/"+e[2]):(t.whoIsOpen=e[1],t.whoIsActive="/"+e[1]),t}},{key:"__build_render_dictionary",value:function(){if(!O.a.isEmpty(this.props.activeUser.user)){var e={},t=this.state.render_key;for(var a in ke){var n;e[a]=(n={},Object(Se.a)(n,t,!1),Object(Se.a)(n,this.state.fa_icon,ke[a].fa_icon),n)}var r=this.props.activeUser.user.permissions,c=this.getPermissions(r);if(0!==c.length)for(var l=0;l<c.length;l++){var s=c[l].split("/"),o="/"+s[1],i=ke[o];if(i){if(2===Object.keys(i).length){var m=Object.keys(ke[o]);"fa_icon"!==m[0]?e[o][m[0]]=ke[o][m[0]]:e[o][m[1]]=ke[o][m[1]],e[o][t]=!0}else e[o][m[1]]=ke[o][m[1]];e[o][t]=!0}else{var d="/";s[2]&&(d="/"+s[2]);var u=ke[o][d];u&&(e[o][d]=u,e[o][t]=!0)}}return e}}},{key:"__render",value:function(e,t,a,n){var c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=n;a&&"/"+a!==n&&"/"===(l="/"+a+n).slice(-1)&&(l=l.slice(0,-1));var s="",o="";c?s=e.name:(o=r.a.createElement("div",{style:{width:"20px"}},r.a.createElement(Ne.a,{icon:e.fa_icon,className:"side-menu_icon"})),s=r.a.createElement("span",{className:"ml-2"},e.name));var i=l===e.url;return"/"===e.url&&"/dashboard"===l&&(i=!0),r.a.createElement("li",{key:"".concat(e.name).concat(t),className:"nav-item"},r.a.createElement(g.b,{to:e.url,className:i?"nav-link active":"nav-link"},o,s))}},{key:"__render_single",value:function(e,t,a){if(e[this.state.render_key]){delete e[this.state.render_key],delete e[this.state.fa_icon];var n=[];for(var r in e)n.push(this.__render(e[r],r,t,a));return n}}},{key:"__render_group",value:function(e,t,a,n){var c=this,l="",s="";t===a&&(l="nav-item-open nav-item-expanded",s="active");var o=!0;if("users"===t?(t="Employees",o=!1):"ai-reports"===t?(t="AI Reports",o=!1):(t=t.replace("-"," "),o=!0),e[this.state.render_key]){var i=e[this.state.fa_icon];delete e[this.state.render_key],delete e[this.state.fa_icon];var m=Object.keys(e);return r.a.createElement("li",{key:t,className:"nav-item nav-item-submenu ".concat(l)},r.a.createElement(g.b,{to:"#",className:"nav-link ".concat(s)},r.a.createElement("div",{style:{width:"20px"}},r.a.createElement("i",{className:"".concat(i," side-menu_icon"),"aria-hidden":"true"}," ")),r.a.createElement("span",{className:o?"text-capitalize sidemenu-text ml-2":"sidemenu-text ml-2"}," ",t," ")),r.a.createElement("ul",{className:"nav nav-group-sub text-capitalize","data-submenu-title":t},m.map((function(t,r){return c.__render(e[t],t,a,n,!0)}))))}}},{key:"__render_dictionary",value:function(e,t,a){for(var n=[],r=Object.keys(e),c=0;c<r.length;c++){Object.keys(e[r[c]]).length>3?n.push(this.__render_group(e[r[c]],r[c].split("/")[1],t,a)):n.push(this.__render_single(e[r[c]],t,a))}return n}},{key:"__render_mobile_navigator",value:function(){return r.a.createElement("div",{className:"sidebar-mobile-toggler text-center text-grey-800"},r.a.createElement("a",{href:"#",className:"sidebar-mobile-main-toggle"},r.a.createElement("i",{className:"icon-arrow-left8"})),"Navigation",r.a.createElement("a",{href:"#",className:"sidebar-mobile-expand"},r.a.createElement("i",{className:"icon-screen-full"}),r.a.createElement("i",{className:"icon-screen-normal"})))}},{key:"__render_user_card",value:function(){return r.a.createElement("div",{className:"sidebar-user"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-body"},r.a.createElement("div",{className:"text-theme media-title font-weight-semibold"},this.props.activeUser.user.first_name),r.a.createElement("div",{className:"text-theme font-size-xs opacity-50"},this.props.activeUser.user.role)),r.a.createElement("div",{className:"ml-3 align-self-center"},r.a.createElement("a",{href:"#",className:"text-theme",title:"Profile Setting"},r.a.createElement("i",{className:"icon-cog3"})),r.a.createElement("a",{href:"#",className:"text-theme ml-3",title:"Lock Screen"},r.a.createElement("i",{className:"icon-user-lock"})),r.a.createElement("a",{href:_,className:"text-theme ml-3",title:"Logout"},r.a.createElement("i",{className:"icon-switch2"}))))))}},{key:"render",value:function(){var e=this.__build_render_dictionary(),t=r.a.createElement("div",null),a=this.checkCurrentURL(),n=a.whoIsActive,c=a.whoIsOpen;return O.a.isEmpty(e)||(t=this.__render_dictionary(e,c,n)),r.a.createElement("div",{className:"sidebar sidebar-light sidebar-main sidebar-fixed sidebar-expand-md noprint"},this.__render_mobile_navigator(),r.a.createElement("div",{className:"sidebar-content side-menu-zIndex"},r.a.createElement("div",{className:"card card-sidebar-mobile"},r.a.createElement("ul",{className:"nav nav-sidebar","data-nav-type":"accordion"},r.a.createElement("li",{className:"nav-item-header"},r.a.createElement("div",{className:"text-uppercase font-size-xs line-height-xs text-grey-800"},"Navigation"),r.a.createElement("i",{className:"icon-menu",title:"Navigation"})),t))))}}]),t}(n.Component);var Ae=Object(s.b)((function(e){return{activeUser:e.activeUser}}))(Object(v.g)(xe)),De=function(e){return r.a.createElement("div",{className:"navbar navbar-expand-lg navbar-light"},r.a.createElement("div",{className:"text-center d-lg-none w-100"},r.a.createElement("button",{type:"button",className:"navbar-toggler dropdown-toggle","data-toggle":"collapse","data-target":"#navbar-footer"},r.a.createElement("i",{className:"icon-unfold mr-2"}),"LMS")),r.a.createElement("div",{className:"navbar-collapse collapse",id:"navbar-footer"},r.a.createElement("span",{className:"navbar-text"},r.a.createElement("a",{href:"/"},"Sales Management System")),r.a.createElement("ul",{className:"navbar-nav ml-lg-auto"},r.a.createElement("li",{className:"nav-item",title:"Software Help"},r.a.createElement("a",{href:"/user-guide/I-RMS.html",target:"_blank",className:"navbar-nav-link font-weight-semibold"},r.a.createElement("span",{className:"text-pink-400"},r.a.createElement("i",{className:"icon-question7 font-16"})," Help"))))))},Te=function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e="";return this.props.showLoader&&(e=r.a.createElement("div",{className:"loading-container-app"},r.a.createElement("span",{className:"badge bg-warning-400 loading-content-app py-2 px-2 font-s-12"},"Loading..."))),r.a.createElement("div",{className:"virtual-body navbar-top-custom"},e,r.a.createElement(je,null),r.a.createElement("div",{className:"page-content"},r.a.createElement(Ae,null),r.a.createElement("div",{className:"content-wrapper m-top-3"},r.a.createElement(_e,{header:this.props.header,faIcon:this.props.faIcon}),r.a.createElement("div",{className:"content"},this.props.children),r.a.createElement(De,null))))}}]),t}(n.Component),Re=Te;Te.defaultProps={showLoader:!1};var Pe=a(242),Ie=a(231),Me=a(232),Be=a(118),Ue=a(13);var Le=function(e){var t=Object(n.useState)(""),a=Object(ve.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)(""),o=Object(ve.a)(s,2),i=o[0],m=o[1],d=Object(n.useState)(""),u=Object(ve.a)(d,2),p=u[0],b=u[1],f=Object(n.useState)(!1),E=Object(ve.a)(f,2),h=E[0],g=E[1],v=Object(n.useState)(""),N=Object(ve.a)(v,2),y=N[0],w=N[1];function O(e){"Enter"===e.key&&j()}function j(){if(""===c.trim()||""===i.trim()||""===p.trim())_("All fields are required and cannot be empty.");else if(i.trim()!=p.trim())_("New Password and Confirm New Password should contain same values");else{var e={old_password:C.encode(c.trim()),new_password:C.encode(i.trim())};A.a.defaults.withCredentials=!0;var t=JSON.parse(sessionStorage.getItem("user"));A()({method:"post",url:G,data:Object(Ue.stringify)(e),headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json",Authorization:"Bearer "+t.jwt_token}}).then((function(e){200===e.status&&(!0===e.data.success?(m(""),b(""),l(""),_(e.data.message)):_(e.data.message))}))}}function _(e){w(e),g(!0)}function S(){g(!h)}var k=r.a.createElement(Pe.a,{isOpen:h,toggle:S},r.a.createElement(Ie.a,{toggle:S},"Response"),r.a.createElement(Me.a,null,y));return r.a.createElement(Re,{header:"Change Password"},k,r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"font-weight-semibold"},"Current Password"," ",r.a.createElement("span",{className:"c-failed",title:"Required"},"*")),r.a.createElement("input",{name:"OldPassword",type:"password",className:"form-control",placeholder:"Enter Your Current Password",value:c,onChange:function(e){return l(e.target.value)},onKeyPress:function(e){return O(e)}})))),r.a.createElement("div",{className:"list-group-item list-group-divider mb-3"}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"font-weight-semibold"},"New Password"," ",r.a.createElement("span",{className:"c-failed",title:"Required"},"*")),r.a.createElement("input",{name:"NewPassword",type:"password",className:"form-control",placeholder:"Enter New Password",value:i,onChange:function(e){return m(e.target.value)},onKeyPress:function(e){return O(e)}}))),r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"font-weight-semibold"},"Confirm New Password"," ",r.a.createElement("span",{className:"c-failed",title:"Required"},"*")),r.a.createElement("input",{name:"ConfirmPassword",type:"password",className:"form-control",placeholder:"Confirm New Password",value:p,onChange:function(e){return b(e.target.value)},onKeyPress:function(e){return O(e)}})))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-2"},r.a.createElement(Be.a,{title:"Update Password",className:"btn btn-theme btn-labeled",onClick:function(){return j()},disabled:""===c||""===i||""===p},"Update"))))},ze=a(48),Fe=a(233),Ye=a(234),qe=a(235),Je=a(236),He=a(54),We=a(62),Ve=a(241);a(77);function Ke(e){function t(e){return e<10?"0"+e:e}var a=new Date(e);return[t(a.getDate()),t(a.getMonth()+1),a.getFullYear()].join("/")}function Ge(e,t){return Array(t-e+1).fill().map((function(t,a){return e+a}))}function Qe(e){return e.first_name+" "+e.last_name}var Xe=a(46),Ze=a.n(Xe),$e=a(36),et=a.n($e);var tt=Object(v.g)(Object(s.b)((function(e){return{activeUser:e.activeUser}}))((function(e){Object(n.useEffect)((function(){a&&(g(!0),A()({method:"get",url:z,headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json",Authorization:"Bearer ".concat(t.jwt_token)},withCredentials:!0}).then((function(e){g(!1),200===e.status?!0===e.data.success?b([l].concat(Object(ze.a)(e.data.rows))):ue(e.data.message):console.log("Network Error")})))}),[]);var t=JSON.parse(sessionStorage.getItem("user")),a="admin"===t.role,c=new Date,l={id:0,first_name:"All",last_name:"Employees"},s=Object(n.useState)([]),o=Object(ve.a)(s,2),i=o[0],m=o[1],d=Object(n.useState)([]),u=Object(ve.a)(d,2),p=u[0],b=u[1],f=Object(n.useState)(!1),E=Object(ve.a)(f,2),h=E[0],g=E[1],v=Object(n.useState)(!1),N=Object(ve.a)(v,2),y=N[0],w=N[1],O=Object(n.useState)(!1),j=Object(ve.a)(O,2),_=j[0],S=j[1],k=Object(n.useState)(!1),C=Object(ve.a)(k,2),x=C[0],D=C[1],T=Object(n.useState)(l),R=Object(ve.a)(T,2),P=R[0],I=R[1],M=Object(n.useState)(ne[c.getMonth()+1]),B=Object(ve.a)(M,2),U=B[0],L=B[1],F=Object(n.useState)(c.getFullYear()),Y=Object(ve.a)(F,2),q=Y[0],J=Y[1],H=Object(n.useState)(!1),K=Object(ve.a)(H,2),G=K[0],Q=K[1],X=Object(n.useState)(""),Z=Object(ve.a)(X,2),$=Z[0],ee=Z[1],te=Object(n.useState)(""),ae=Object(ve.a)(te,2),le=ae[0],se=ae[1],oe=Object(n.useState)(new Date),ie=Object(ve.a)(oe,2),me=ie[0],de=ie[1];function ue(e){ee(e),Q(!0)}function pe(){!function(e){m([]),g(!0),A()({method:"post",url:W,data:Object(Ue.stringify)(e),headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json",Authorization:"Bearer ".concat(t.jwt_token)},withCredentials:!0}).then((function(e){g(!1),200===e.status?!0===e.data.success&&e.data.rows.length>0?m(e.data.rows):ue(e.data.message):console.log("Network Error")}))}({employee_id:P.id,month:U.id,year:q})}function be(){Q(!G)}for(var fe=Ge(2015,c.getFullYear()),Ee=[],he=0;he<i.length;he++){var ge=[],ye=i[he];ge.push(ye.employee_name);var we=new Intl.NumberFormat("en-US");ge.push(String(we.format(ye.total_billed_amount))+" AED"),ge.push(String(we.format(ye.total_received_amount))+" AED"),ge.push(String(we.format(ye.total_due_amount))+" AED"),Ee.push(ge)}var Oe=r.a.createElement(Pe.a,{isOpen:G,toggle:be},r.a.createElement(Ie.a,{toggle:be},"Response"),r.a.createElement(Me.a,null,$));function je(){var e=Ke(me);A()("".concat(V),{method:"POST",responseType:"blob",data:Object(Ue.stringify)({date:e,type:le})}).then((function(t){if(!1!==t.success){var a=new Blob([t.data],{type:"application/pdf"});Object(We.saveAs)(a,"".concat(le," Report generated on ").concat(e,".pdf"))}else ue(t.message)})).catch((function(e){ue(e)}))}return r.a.createElement(n.Fragment,null,Oe,"admin"===t.role?r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h4",{className:"card-title"},"Print Reports"),r.a.createElement("div",{className:"row justify-content-around"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("div",{id:"reportType",className:"m-1 w-100",onChange:function(e){return se(e.target.value)}},"Report type:",r.a.createElement("input",{className:"ml-3 m-1",type:"radio",value:"Daily",name:"reportType",id:"reportTypeDaily"})," ","Daily",r.a.createElement(Ve.a,{placement:"bottom",target:"reportTypeDaily"},"Daily Report"),r.a.createElement("input",{className:"ml-3 m-1",type:"radio",value:"Monthly",name:"reportType",id:"reportTypeMonthly"})," ","Monthly",r.a.createElement(Ve.a,{placement:"bottom",target:"reportTypeMonthly"},"Monthly Report"),r.a.createElement("input",{className:"ml-3 m-1",type:"radio",value:"Yearly",name:"reportType",id:"reportTypeYearly"})," ","Yearly",r.a.createElement(Ve.a,{placement:"bottom",target:"reportTypeYearly"},"Yearly Report"))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement(et.a,{className:"form-control",id:"reportDate",dateFormat:"MMMM d, yyyy",selected:me,onChange:function(e){de(e)},todayButton:"Today"}),r.a.createElement(Ve.a,{placement:"bottom",target:"reportDate"},"Select report date.")),r.a.createElement("div",{className:"col-md-3"},r.a.createElement(Be.a,{id:"printLedger",className:"btn btn-theme btn-labeled w-100",onClick:function(){return je()},disabled:""===le},r.a.createElement(Ne.a,{icon:["fas","print"],className:"mr-2"}),"Print Ledger"),r.a.createElement(Ve.a,{placement:"bottom",target:"printLedger"},"Print Ledger")),r.a.createElement("div",{className:"col-md-3"},r.a.createElement(Be.a,{id:"printReportButton",className:"btn btn-theme btn-labeled w-100",onClick:function(){return je()},disabled:""===le},r.a.createElement(Ne.a,{icon:["fas","print"],className:"mr-2"}),"Print Cash Report"),r.a.createElement(Ve.a,{placement:"bottom",target:"printReportButton"},"Print selected report."))))):"",r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h4",{className:"card-title"},"Employee Total"),r.a.createElement("div",{className:"row justify-content-around"},a?r.a.createElement("div",{className:"col-md-3"},r.a.createElement(Fe.a,{isOpen:y,toggle:function(){return w((function(e){return!e}))}},r.a.createElement(Ye.a,{caret:!0,className:"btn btn-theme btn-labeled w-100 text-right"},Qe(P)),r.a.createElement(qe.a,{style:{overflow:"auto",maxHeight:"20vh"},className:"w-100"},p.map((function(e){return r.a.createElement(Je.a,{key:e.id,onClick:function(){!function(e){I(e)}(e)}},Qe(e))}))))):"",r.a.createElement("div",{className:"col-md-3"},r.a.createElement(Fe.a,{isOpen:_,toggle:function(){return S((function(e){return!e}))}},r.a.createElement(Ye.a,{caret:!0,className:"btn btn-theme btn-labeled w-100 text-right"},U.name),r.a.createElement(qe.a,{style:{overflow:"auto",maxHeight:"20vh"},className:"w-100"},ne.map((function(e){return r.a.createElement(Je.a,{key:e.id,onClick:function(){!function(e){L(e)}(e)}},e.name)}))))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement(Fe.a,{isOpen:x,toggle:function(){return D((function(e){return!e}))}},r.a.createElement(Ye.a,{caret:!0,className:"btn btn-theme btn-labeled w-100 text-right"},q),r.a.createElement(qe.a,{style:{overflow:"auto",maxHeight:"20vh"},className:"w-100"},fe.map((function(e){return r.a.createElement(Je.a,{key:e,onClick:function(){!function(e){J(e)}(e)}},e)}))))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement(Be.a,{title:"Filter Data",className:"btn btn-theme btn-labeled w-100",onClick:function(){return pe()}},r.a.createElement(Ne.a,{icon:["fas","filter"],className:"mr-2"}),"Filter Data"))))),Ee.length>0?r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement(He.a,{headerFields:[{id:0,type:"text",align:"text-left",sort:"sorting_asc",name:"EMPLOYEE NAME"},{id:1,type:"text",sort:"sorting",align:"text-left",name:"TOTAL BILLED"},{id:2,type:"text",sort:"sorting",align:"text-left",name:"TOTAL RECEIVED"},{id:3,type:"text",sort:"sorting",align:"text-left",name:"TOTAL REMAINING"}],data:Ee,showSno:!1,enableFilter:!0,pages:re,colors:ce}))):r.a.createElement("div",{className:"h-100 row align-items-center"},r.a.createElement("div",{className:"text-center col mb-5 pb-5"},r.a.createElement(Ze.a,{color:"#1861B8",size:20,loading:h}))))})));var at=Object(v.g)(Object(s.b)((function(e){return{activeUser:e.activeUser}}))((function(e){Object(n.useEffect)((function(){a&&(g(!0),A()({method:"get",url:z,headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json",Authorization:"Bearer ".concat(t.jwt_token)},withCredentials:!0}).then((function(e){g(!1),200===e.status?!0===e.data.success?b([l].concat(Object(ze.a)(e.data.rows))):ee(e.data.message):console.log("Network Error")})))}),[]);var t=JSON.parse(sessionStorage.getItem("user")),a="admin"===t.role,c=new Date,l={id:0,first_name:"All",last_name:"Employees"},s=Object(n.useState)([]),o=Object(ve.a)(s,2),i=o[0],m=o[1],d=Object(n.useState)([]),u=Object(ve.a)(d,2),p=u[0],b=u[1],f=Object(n.useState)(!1),E=Object(ve.a)(f,2),h=E[0],g=E[1],v=Object(n.useState)(!1),N=Object(ve.a)(v,2),y=N[0],w=N[1],O=Object(n.useState)(!1),j=Object(ve.a)(O,2),_=j[0],S=j[1],k=Object(n.useState)(!1),C=Object(ve.a)(k,2),x=C[0],D=C[1],T=Object(n.useState)(l),R=Object(ve.a)(T,2),P=R[0],I=R[1],M=Object(n.useState)(ne[c.getMonth()+1]),B=Object(ve.a)(M,2),U=B[0],L=B[1],F=Object(n.useState)(c.getFullYear()),Y=Object(ve.a)(F,2),q=Y[0],J=Y[1],H=Object(n.useState)(!1),V=Object(ve.a)(H,2),K=V[0],G=V[1],Q=Object(n.useState)(""),X=Object(ve.a)(Q,2),Z=X[0],$=X[1];function ee(e){$(e),G(!0)}function te(){!function(e){m([]),g(!0),A()({method:"post",url:W,data:Object(Ue.stringify)(e),headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json",Authorization:"Bearer ".concat(t.jwt_token)},withCredentials:!0}).then((function(e){g(!1),200===e.status?!0===e.data.success&&e.data.rows.length>0?m(e.data.rows):ee(e.data.message):console.log("Network Error")}))}({employee_id:P.id,month:U.id,year:q})}function ae(e){return e.first_name+" "+e.last_name}function le(){G(!K)}for(var se=Ge(2015,c.getFullYear()),oe=[],ie=0;ie<i.length;ie++){var me=[],de=i[ie];me.push(de.employee_name);var ue=new Intl.NumberFormat("en-US");me.push(String(ue.format(de.total_billed_amount))+" AED"),me.push(String(ue.format(de.total_received_amount))+" AED"),me.push(String(ue.format(de.total_due_amount))+" AED"),oe.push(me)}var pe=r.a.createElement(Pe.a,{isOpen:K,toggle:le},r.a.createElement(Ie.a,{toggle:le},"Response"),r.a.createElement(Me.a,null,Z));return r.a.createElement(n.Fragment,null,pe,r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row justify-content-between"},a?r.a.createElement("div",{className:"col-md-3"},r.a.createElement(Fe.a,{isOpen:y,toggle:function(){return w((function(e){return!e}))}},r.a.createElement(Ye.a,{caret:!0,className:"btn btn-theme btn-labeled w-100 text-right"},ae(P)),r.a.createElement(qe.a,{style:{overflow:"auto",maxHeight:"20vh"}},p.map((function(e){return r.a.createElement(Je.a,{key:e.id,onClick:function(){!function(e){I(e)}(e)}},ae(e))}))))):"",r.a.createElement("div",{className:"col-md-3"},r.a.createElement(Fe.a,{isOpen:_,toggle:function(){return S((function(e){return!e}))}},r.a.createElement(Ye.a,{caret:!0,className:"btn btn-theme btn-labeled w-100 text-right"},U.name),r.a.createElement(qe.a,{style:{overflow:"auto",maxHeight:"20vh"}},ne.map((function(e){return r.a.createElement(Je.a,{key:e.id,onClick:function(){!function(e){L(e)}(e)}},e.name)}))))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement(Fe.a,{isOpen:x,toggle:function(){return D((function(e){return!e}))}},r.a.createElement(Ye.a,{caret:!0,className:"btn btn-theme btn-labeled w-100 text-right"},q),r.a.createElement(qe.a,{style:{overflow:"auto",maxHeight:"20vh"}},se.map((function(e){return r.a.createElement(Je.a,{key:e,onClick:function(){!function(e){J(e)}(e)}},e)}))))),r.a.createElement("div",{className:"col-md-2"},r.a.createElement(Be.a,{title:"Filter Data",className:"btn btn-theme btn-labeled",onClick:function(){return te()}},"Filter Data"))))),oe.length>0?r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement(He.a,{headerFields:[{id:0,type:"text",align:"text-left",sort:"sorting_asc",name:"EMPLOYEE NAME"},{id:1,type:"text",sort:"sorting",align:"text-left",name:"TOTAL BILLED"},{id:2,type:"text",sort:"sorting",align:"text-left",name:"TOTAL RECEIVED"},{id:3,type:"text",sort:"sorting",align:"text-left",name:"TOTAL REMAINING"}],data:oe,showSno:!1,enableFilter:!0,pages:re,colors:ce}))):r.a.createElement("div",{className:"h-100 row align-items-center"},r.a.createElement("div",{className:"text-center col mb-5 pb-5"},r.a.createElement(Ze.a,{color:"#1861B8",size:20,loading:h}))))})));var nt=Object(s.b)((function(e){return{activeUser:e.activeUser}}))((function(e){var t="";return t="admin"===JSON.parse(sessionStorage.getItem("user")).role?r.a.createElement(tt,null):r.a.createElement(at,{activeUser:e.activeUser.user}),r.a.createElement(Re,{header:"Dashboard"},t)})),rt=function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return r.a.createElement(nt,null)}}]),t}(n.Component),ct=a(237),lt=a(42),st=a(58);function ot(e){var t=new Intl.NumberFormat("en-US");return r.a.createElement("div",null,e.orderProducts.map((function(e,a){return r.a.createElement("div",{key:a,className:"row"},r.a.createElement("div",{className:"col-md-2"},r.a.createElement("label",{className:"font-weight-semibold"},e.product_type_name)),r.a.createElement("div",{className:"col-md-2"},r.a.createElement("label",{className:"font-weight-semibold"},e.product_name)),r.a.createElement("div",{className:"col-md-2"},r.a.createElement("label",{className:"font-weight-semibold"},e.quantity)),r.a.createElement("div",{className:"col-md-2"},r.a.createElement("label",{className:"font-weight-semibold"},t.format(e.unit_price)," AED")),r.a.createElement("div",{className:"col-md-2"},r.a.createElement("label",{className:"font-weight-semibold"},t.format(e.quantity*e.unit_price)," AED")))})))}function it(e){return r.a.createElement("div",{className:"row"},e.headers.map((function(e,t){return r.a.createElement("div",{key:t,className:"col-md-2"},r.a.createElement("label",{className:"font-weight-bold"},e))})))}var mt=a(121),dt=a.n(mt);var ut=function(e){var t=new Intl.NumberFormat("en-US"),a=JSON.parse(sessionStorage.getItem("user")),c={name:"Select Design"},l={name:"Select Product Type"},s=Object(n.useState)([]),o=Object(ve.a)(s,2),i=o[0],m=o[1],d=Object(n.useState)(0),u=Object(ve.a)(d,2),p=u[0],b=u[1],f=Object(n.useState)(0),E=Object(ve.a)(f,2),h=E[0],g=E[1],v=Object(n.useState)(""),N=Object(ve.a)(v,2),y=N[0],w=N[1],O=Object(n.useState)(""),j=Object(ve.a)(O,2),_=j[0],S=j[1],k=Object(n.useState)(Object(st.default)(new Date,5)),C=Object(ve.a)(k,2),x=C[0],D=C[1],T=Object(n.useState)(!1),M=Object(ve.a)(T,2),B=M[0],U=M[1],L=Object(n.useState)(!1),F=Object(ve.a)(L,2),Y=F[0],q=F[1],J=Object(n.useState)(!1),H=Object(ve.a)(J,2),W=H[0],V=H[1],K=Object(n.useState)(!1),G=Object(ve.a)(K,2),Q=G[0],Z=G[1],$=Object(n.useState)(new Date),ee=Object(ve.a)($,2),te=ee[0],ae=ee[1],ne=Object(n.useState)([]),re=Object(ve.a)(ne,2),ce=re[0],le=re[1],se=Object(n.useState)(!0),oe=Object(ve.a)(se,2),ie=oe[0],de=oe[1],ue=Object(n.useState)([]),pe=Object(ve.a)(ue,2),be=pe[0],fe=pe[1],Ee=Object(n.useState)([]),he=Object(ve.a)(Ee,2),ge=he[0],ye=he[1],we=Object(n.useState)(1),Oe=Object(ve.a)(we,2),je=Oe[0],_e=Oe[1],Se=Object(n.useState)(c),ke=Object(ve.a)(Se,2),Ce=ke[0],xe=ke[1],Ae=Object(n.useState)(l),De=Object(ve.a)(Ae,2),Te=De[0],Le=De[1],ze=Object(n.useState)("Disposal"),He=Object(ve.a)(ze,2),We=He[0],Ve=He[1],Ge=Object(n.useState)(0),Xe=Object(ve.a)(Ge,2),Ze=Xe[0],$e=Xe[1],tt=Object(n.useState)(!1),at=Object(ve.a)(tt,2),nt=at[0],rt=at[1],mt=Object(n.useState)(!1),ut=Object(ve.a)(mt,2),pt=ut[0],bt=ut[1],ft=Object(n.useState)(""),Et=Object(ve.a)(ft,2),ht=Et[0],gt=Et[1],vt=Object(n.useState)(""),Nt=Object(ve.a)(vt,2),yt=Nt[0],wt=Nt[1],Ot=Object(n.useState)(!1),jt=Object(ve.a)(Ot,2),_t=jt[0],St=jt[1],kt=Object(n.useState)({first_name:"Select",last_name:"Employee"}),Ct=Object(ve.a)(kt,2),xt=Ct[0],At=Ct[1],Dt=Object(n.useState)(2),Tt=Object(ve.a)(Dt,2),Rt=Tt[0],Pt=Tt[1],It=Object(n.useState)(""),Mt=Object(ve.a)(It,2),Bt=Mt[0],Ut=Mt[1],Lt=Object(n.useState)(""),zt=Object(ve.a)(Lt,2),Ft=zt[0],Yt=zt[1],qt=Object(n.useState)(""),Jt=Object(ve.a)(qt,2),Ht=Jt[0],Wt=Jt[1];function Vt(){St(!_t)}function Kt(){rt(!nt)}function Gt(e){wt(e),St(!0)}Object(n.useEffect)((function(){!function(){if(0===ge.length){var e=JSON.parse(sessionStorage.getItem("user"));A.a.defaults.withCredentials=!0;var t={headers:{Authorization:"Bearer "+e.jwt_token}};A.a.get(R,t).then((function(e){200===e.status?!0===e.data.success?ye(e.data.rows):Gt(e.data.message):console.log("Network Error")}))}}(),A()({method:"get",url:X,headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json",Authorization:"Bearer ".concat(a.jwt_token)},withCredentials:!0}).then((function(e){200===e.status?!0===e.data.success?Pt(e.data.vat):Gt(e.data.message):console.log("Network Error")})),"admin"===a.role&&A()({method:"get",url:z,headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json",Authorization:"Bearer ".concat(a.jwt_token)},withCredentials:!0}).then((function(e){200===e.status?!0===e.data.success?m(e.data.rows):Gt(e.data.message):console.log("Network Error")}))}),[]);var Qt=r.a.createElement(Pe.a,{isOpen:_t,toggle:Vt},r.a.createElement(Ie.a,{toggle:Vt},"Response"),r.a.createElement(Me.a,null,yt));function Xt(e){Le(e),function(e){if(de(!0),"Other"!==e.name){var t=JSON.parse(sessionStorage.getItem("user"));A.a.defaults.withCredentials=!0,A()({method:"post",url:P,data:Object(Ue.stringify)({id:e.id}),headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json",Authorization:"Bearer ".concat(t.jwt_token)},withCredentials:!0}).then((function(e){200===e.status?!0===e.data.success?(fe(e.data.rows),de(!1)):Gt(e.data.message):console.log("Network Error")}))}}(e),xe(c)}var Zt=r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement(it,{headers:["Type","Name","Quantity","Unit Price","Sub Total"]}),r.a.createElement(ot,{orderProducts:ce}))),$t=0;ce.length>0&&($t=ce.reduce((function(e,t){return e+t.quantity*t.unit_price}),0));var ea=Rt*$t/100,ta=r.a.createElement(Pe.a,{isOpen:nt,toggle:Kt},r.a.createElement(Ie.a,{toggle:Kt},"Order Confirmation"),r.a.createElement(Me.a,null,pt?"Order successfully added.":"Unable to process order."," "));function aa(){if(""!==y&&""!==_&&0!==ce.length){var e={customer_phone_number:_,customer_name:y,placement_date:Ke(te),delivery_date:Ke(x),advance_payment:p,products:JSON.stringify(ce),customer_trn:ht,remarks:Bt,cash_disposal:We,employee_id:xt.id,discount:h,cheque:Ht},t=JSON.parse(sessionStorage.getItem("user"));A.a.defaults.withCredentials=!0,A()({method:"post",url:I,data:Object(Ue.stringify)(e),headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json",Authorization:"Bearer "+t.jwt_token}}).then((function(e){200===e.status&&(!0===e.data.success?(bt(!0),b(0),w(""),S(""),D(Object(st.default)(new Date,5)),U(!1),q(!1),ae(new Date),le([]),de(!0),fe([]),_e(1),xe(c),Le(l),$e(0),gt(""),Ut(""),g(0),Yt(""),Wt("")):(bt(!1),console.log(e.data.message)),rt(!0))}))}}return r.a.createElement(Re,{header:"New Job Order Form"},ta,Qt,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},"admin"===a.role?r.a.createElement("div",{className:"row justify-content-start"},r.a.createElement("div",{className:"col-md-2"},r.a.createElement("label",{className:"font-weight-semibold"},"Order By"," ",r.a.createElement("span",{className:"c-failed",title:"Required"},"*"))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement(Fe.a,{isOpen:Q,toggle:function(){return Z((function(e){return!e}))}},r.a.createElement(Ye.a,{caret:!0,className:"btn btn-theme btn-labeled text-right w-100"},Qe(xt)),r.a.createElement(qe.a,{style:{overflow:"auto",maxHeight:"20vh"},className:"w-100"},i.map((function(e,t){return r.a.createElement(Je.a,{key:t,onClick:function(){return At(e)}},Qe(e))})))))):"",r.a.createElement("h4",{className:"card-title"},"Customer"),r.a.createElement("div",{className:"row justify-content-around"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"font-weight-semibold"},"Name"," ",r.a.createElement("span",{className:"c-failed",title:"Required"},"*")),r.a.createElement("input",{name:"CustomerName",type:"text",className:"form-control",placeholder:"Enter Customer Name",value:y,onChange:function(e){return w(e.target.value)}}))),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"font-weight-semibold"},"Phone Number"," ",r.a.createElement("span",{className:"c-failed",title:"Required"},"*")),r.a.createElement(dt.a,{className:"form-control",name:"CustomerPhoneNumber",placeholder:"971 00 000 0000",value:_,onChange:function(e){return S(e)}})))),r.a.createElement("div",{className:"row justify-content-around"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("label",{className:"font-weight-semibold"},"Order Date"," ",r.a.createElement("span",{className:"c-failed",title:"Required"},"*")),r.a.createElement(et.a,{className:"form-control",dateFormat:"MMMM d, yyyy",selected:te,onChange:function(e){return ae(e)},todayButton:"Today"})),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"font-weight-semibold"},"Delivery Date"," ",r.a.createElement("span",{className:"c-failed",title:"Required"},"*")),r.a.createElement(et.a,{className:"form-control",dateFormat:"MMMM d, yyyy",selected:x,onChange:function(e){return D(e)},todayButton:"Today",minDate:te})))),r.a.createElement("div",{className:"row justify-content-around"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"font-weight-semibold"},"Customer TRN"," ",r.a.createElement("span",{className:"c-failed",title:"Required"},"*")),r.a.createElement("input",{name:"CustomerTRN",type:"number",className:"form-control",placeholder:"Enter Customer TRN",value:ht,onChange:function(e){return gt(e.target.value)}})))),r.a.createElement("h4",{className:"card-title"},"Order Details"),r.a.createElement("div",{className:"row justify-content-around"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"font-weight-semibold"},"Product Type"," ",r.a.createElement("span",{className:"c-failed",title:"Required"},"*")),r.a.createElement(Fe.a,{isOpen:Y,toggle:function(){return q((function(e){return!e}))}},r.a.createElement(Ye.a,{caret:!0,className:"btn btn-theme btn-labeled"},Te.name),r.a.createElement(qe.a,{style:{overflow:"auto",maxHeight:"20vh"}},ge.map((function(e){return r.a.createElement(Je.a,{key:e.id,onClick:function(){return Xt(e)}},e.name)})))))),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"font-weight-semibold"},"Design"," ",r.a.createElement("span",{className:"c-failed",title:"Required"},"*")),r.a.createElement(Fe.a,{isOpen:B,toggle:function(){return U((function(e){return!e}))}},r.a.createElement(Ye.a,{caret:!0,className:"btn-theme btn-labeled",disabled:ie},Ce.name),r.a.createElement(qe.a,{style:{overflow:"auto",maxHeight:"20vh"}},be.map((function(e){return r.a.createElement(Je.a,{key:e.id,onClick:function(){return xe(e)}},e.name)}))))))),r.a.createElement("div",{className:"row justify-content-around"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("textarea",{name:"Product Description",type:"text",className:"form-control",placeholder:"Product Description",value:Ft,onChange:function(e){return Yt(e.target.value)},maxlength:250,rows:"2"}))),r.a.createElement("div",{className:"row justify-content-around"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"font-weight-semibold"},"Quantity"," ",r.a.createElement("span",{className:"c-failed",title:"Required"},"*")),r.a.createElement("input",{type:"Number",className:"form-control",min:1,value:je,onChange:function(e){return _e(e.target.value)}}))),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"font-weight-semibold"},"Price"," ",r.a.createElement("span",{className:"c-failed",title:"Required"},"*")),r.a.createElement(lt.a,{className:"form-control",suffix:" AED",precision:"0",value:Ze,onChangeEvent:function(e,t,a){return $e(a)}})))),r.a.createElement("div",{className:"row justify-content-end"},r.a.createElement("div",{className:"col-md-2"},r.a.createElement(Be.a,{title:"Add Product",className:"btn btn-theme btn-labeled",onClick:function(){return function(){if(Te.name!==l.name){le([]);var e={product_type_name:Te.name,product_name_id:Ce.id,product_name:Ce.name===c.name?"Other":Ce.name,quantity:parseInt(je),unit_price:Ze,description:Ft},t=ce;t.length>0?t.unshift(e):t=[e],le(t),xe(c),Le(l),_e(1),$e(0),Yt("")}}()}},"Add Product"))))),ce.length>0?Zt:""),r.a.createElement("div",{className:"col-md-4"},r.a.createElement(ct.a,{style:{height:"100vh"}},r.a.createElement("div",{className:"card-body order-total-padding"},r.a.createElement("h4",{className:"card-title",style:{marginBottom:"40px"}},"Order Summary"),r.a.createElement("div",{className:"row justify-content-between",style:{marginBottom:"10px"}},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("label",{className:"font-weight-semibold"},"Amount: ")),r.a.createElement("div",{className:"col-md-4 text-right"},r.a.createElement("label",{className:"font-weight-semibold"},t.format($t)," AED"))),r.a.createElement("div",{className:"row justify-content-between",style:{marginBottom:"10px"}},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("label",{className:"font-weight-semibold"},"Tax (",Rt," %):"," ")),r.a.createElement("div",{className:"col-md-4 text-right"},r.a.createElement("label",{className:"font-weight-semibold"},t.format(ea)," AED"))),r.a.createElement("div",{className:"row justify-content-between"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("label",{className:"font-weight-semibold"},"Total Bill: ")),r.a.createElement("div",{className:"col-md-4 text-right"},r.a.createElement("label",{className:"font-weight-semibold"},t.format($t+ea)," AED"))),r.a.createElement("div",{className:"row justify-content-between align-items-center"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("label",{className:"font-weight-semibold"},"Discount: ")),r.a.createElement("div",{className:"col-md-3 text-right"},r.a.createElement(lt.a,{className:"form-control",precision:"0",value:h,onChangeEvent:function(e,t,a){return function(e,t,a){g(a)}(0,0,a)}}))),r.a.createElement("div",{className:"row justify-content-between align-items-center"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("label",{className:"font-weight-semibold"},"Advance Payment:"," ")),r.a.createElement("div",{className:"col-md-3 text-right"},r.a.createElement(lt.a,{className:"form-control",precision:"0",value:p,onChangeEvent:function(e,t,a){return function(e,t,a){b(a>ea+$t?ea+$t:a)}(0,0,a)}}))),r.a.createElement("div",{className:"row justify-content-between align-items-center"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement(Fe.a,{isOpen:W,toggle:function(){return V((function(e){return!e}))}},r.a.createElement(Ye.a,{caret:!0,className:"btn btn-theme btn-labeled",disabled:0===p},We),r.a.createElement(qe.a,{style:{overflow:"auto",maxHeight:"20vh"}},me.map((function(e,t){return r.a.createElement(Je.a,{key:t,onClick:function(){return Ve(e)}},e)}))))),r.a.createElement("div",{className:"col-md-6 text-right"},r.a.createElement("input",{disabled:"Bank"!==We,name:"Cheque",type:"text",className:"form-control",placeholder:"Cheque Number",value:Ht,onChange:function(e){return Wt(e.target.value)}}))),r.a.createElement("hr",{style:{marginTop:"20px",marginBottom:"20px",marginLeft:"10px",marginRight:"10px"}}),r.a.createElement("div",{className:"row justify-content-between"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("label",{className:"font-weight-black font-s-15"},"Remaining Bill:"," ")),r.a.createElement("div",{className:"col-md-4 text-right"},r.a.createElement("label",{className:"font-weight-black font-s-15"},t.format($t+ea-p-h)," ","AED"))),r.a.createElement("div",{className:"row justify-content-between"},r.a.createElement("div",{className:"col-md-12 text-right"},r.a.createElement("textarea",{name:"Remarks",type:"text",className:"form-control",placeholder:"Remarks",value:Bt,onChange:function(e){return Ut(e.target.value)},maxlength:250,rows:"5"}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(Be.a,{title:"Confirm Order",className:"btn btn-theme btn-labeled",size:"lg",block:!0,style:{marginTop:"50px",marginBottom:"40px"},onClick:function(){return aa()},disabled:0===ce.length||""===y||""===_||""===ht||"Disposal"===We},r.a.createElement(Ne.a,{icon:["far","check-circle"],className:"mr-2"}),"Confirm Order"))))))))},pt=a(43),bt=a.n(pt),ft=a(238);var Et=function(e){Object(n.useEffect)((function(){a&&(g(!0),A()({method:"get",url:z,headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json",Authorization:"Bearer ".concat(t.jwt_token)},withCredentials:!0}).then((function(e){g(!1),200===e.status?!0===e.data.success?b([l].concat(Object(ze.a)(e.data.rows))):ut(e.data.message):console.log("Network Error")})))}),[]);var t=JSON.parse(sessionStorage.getItem("user")),a="admin"===t.role,c=new Date,l={id:0,first_name:"All",last_name:"Employees"},s=Object(n.useState)([]),o=Object(ve.a)(s,2),i=o[0],m=o[1],d=Object(n.useState)([]),u=Object(ve.a)(d,2),p=u[0],b=u[1],f=Object(n.useState)(!1),E=Object(ve.a)(f,2),h=E[0],g=E[1],v=Object(n.useState)(!1),N=Object(ve.a)(v,2),y=N[0],w=N[1],O=Object(n.useState)(""),j=Object(ve.a)(O,2),_=j[0],S=j[1],k=Object(n.useState)(""),C=Object(ve.a)(k,2),x=C[0],D=C[1],T=Object(n.useState)(!1),R=Object(ve.a)(T,2),P=R[0],I=R[1],L=Object(n.useState)(""),F=Object(ve.a)(L,2),Y=F[0],q=F[1],J=Object(n.useState)(!1),H=Object(ve.a)(J,2),W=H[0],V=H[1],K=Object(n.useState)(!1),G=Object(ve.a)(K,2),Q=G[0],X=G[1],Z=Object(n.useState)(!1),$=Object(ve.a)(Z,2),ee=$[0],te=$[1],ae=Object(n.useState)(l),le=Object(ve.a)(ae,2),se=le[0],oe=le[1],ie=Object(n.useState)(ne[c.getMonth()+1]),de=Object(ve.a)(ie,2),ue=de[0],pe=de[1],be=Object(n.useState)(c.getFullYear()),fe=Object(ve.a)(be,2),Ee=fe[0],he=fe[1],ge=Object(n.useState)(!1),ye=Object(ve.a)(ge,2),we=ye[0],Oe=ye[1],je=Object(n.useState)(""),_e=Object(ve.a)(je,2),Se=_e[0],ke=_e[1],Ce=Object(n.useState)(0),xe=Object(ve.a)(Ce,2),Ae=xe[0],De=xe[1],Te=Object(n.useState)(!1),Le=Object(ve.a)(Te,2),We=Le[0],Ve=Le[1],Xe=Object(n.useState)(!1),$e=Object(ve.a)(Xe,2),tt=$e[0],at=$e[1],nt=Object(n.useState)("Disposal"),rt=Object(ve.a)(nt,2),ct=rt[0],st=rt[1],ot=Object(n.useState)(""),it=Object(ve.a)(ot,2),mt=it[0],dt=it[1];function ut(e){ke(e),Oe(!0)}function pt(){Et({employee_id:se.id,month:ue.id,year:Ee})}function Et(e){m([]),g(!0),A()({method:"post",url:M,data:Object(Ue.stringify)(e),headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json",Authorization:"Bearer ".concat(t.jwt_token)},withCredentials:!0}).then((function(e){g(!1),200===e.status?!0===e.data.success&&e.data.rows.length>0?m(e.data.rows):ut(e.data.message):console.log("Network Error")}))}function ht(){Ve(!We)}function gt(){w(!y)}function vt(){Oe(!we)}for(var Nt=Ge(2015,c.getFullYear()),yt=[],wt=function(){jt=[];var t=i[Ot];_t=new Intl.NumberFormat("en-US");var a=[];"Cancelled"!==i[Ot].order_status&&a.push({icon:["far","edit"],className:"text-info-600 cursor-pointer h3",callBack:function(){return function(e){D(new Date(e.placement_date)),S(new Date(e.delivery_date)),q(e.id),w(!0)}(t)}}),"Incomplete"===i[Ot].order_status&&a.push({icon:["fas","hand-holding-usd"],className:"text-info-600 cursor-pointer h3 ml-2",callBack:function(){return function(e){q(e.id),Ve(!0)}(t)}}),a.push({icon:["fas","info-circle"],className:"text-info-600 cursor-pointer h3 ml-2",callBack:function(){q(t.id),e.history.push({pathname:"".concat("/order"),state:{orderId:t.id}})}}),jt.push(a),jt.push(i[Ot].id?i[Ot].id:"N/A"),jt.push(String(_t.format(t.billed_amount)+" AED"));var n={topText:String(i[Ot].first_name+" "+i[Ot].last_name),bottomText:String(i[Ot].employee_id),picture:null};jt.push(n);var r={topText:String(i[Ot].customer_name),bottomText:String(i[Ot].customer_phone_number),picture:null};jt.push(r),jt.push(""===i[Ot].placement_date||null===i[Ot].placement_date?"N/A":bt()(i[Ot].placement_date).format("DD-MM-YYYY")),jt.push(""===i[Ot].delivery_date||null===i[Ot].delivery_date?"N/A":bt()(i[Ot].delivery_date).format("DD-MM-YYYY")),jt.push(String(_t.format(i[Ot].due_amount)+" AED")),"Incomplete"===i[Ot].order_status?jt.push({class:"badge badge-info text-capitalize",data:"Incomplete"}):"Complete"===i[Ot].order_status?jt.push({class:"badge badge-success text-capitalize",data:"Complete"}):"Cancelled"===i[Ot].order_status&&jt.push({class:"badge badge-danger text-capitalize",data:"Cancelled"}),jt.push(),yt.push(jt)},Ot=0;Ot<i.length;Ot++){var jt,_t;wt()}var St=r.a.createElement(Pe.a,{isOpen:y,toggle:gt},r.a.createElement(Ie.a,{toggle:gt},"Change Delivery Date"),r.a.createElement(Me.a,null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"font-weight-semibold"},"Delivery Date"," ",r.a.createElement("span",{className:"c-failed",title:"Required"},"*")),r.a.createElement(et.a,{className:"form-control",dateFormat:"MMMM d, yyyy",selected:_,onChange:function(e){S(e),I(!0)},todayButton:"Today",minDate:x}))),r.a.createElement(ft.a,null,r.a.createElement(Be.a,{title:"Update",className:"btn btn-theme btn-labeled",onClick:function(){A()({method:"post",url:U,data:Object(Ue.stringify)({order_id:Y,newDate:Ke(_)}),headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json",Authorization:"Bearer ".concat(t.jwt_token)},withCredentials:!0}).then((function(e){200===e.status?!0===e.data.success?(w(!1),m([]),I(!1),S(""),D(""),Et()):ut(e.data.message):console.log("Network Error")}))},disabled:!P},"Update"))),kt=r.a.createElement(Pe.a,{isOpen:we,toggle:vt},r.a.createElement(Ie.a,{toggle:vt},"Response"),r.a.createElement(Me.a,null,Se)),Ct=r.a.createElement(Pe.a,{isOpen:We,toggle:ht},r.a.createElement(Ie.a,{toggle:ht},"Receive payment for order"),r.a.createElement(Me.a,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"font-weight-semibold"},"New Payment"," ",r.a.createElement("span",{className:"c-failed",title:"Required"},"*")),r.a.createElement(lt.a,{className:"form-control",suffix:" AED",precision:"0",value:Ae,onChangeEvent:function(e,t,a){return De(a)}})))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"form-group"},r.a.createElement(Fe.a,{isOpen:tt,toggle:function(){return at((function(e){return!e}))}},r.a.createElement(Ye.a,{caret:!0,className:"btn btn-theme btn-labeled"},ct),r.a.createElement(qe.a,{style:{overflow:"auto",maxHeight:"20vh"}},me.map((function(e,t){return r.a.createElement(Je.a,{key:t,onClick:function(){return st(e)}},e)})))))),r.a.createElement("div",{className:"col-md-6 text-right"},r.a.createElement("input",{disabled:"Bank"!==ct,name:"Cheque",type:"text",className:"form-control",placeholder:"Cheque Number",value:mt,onChange:function(e){return dt(e.target.value)}})))),r.a.createElement(ft.a,null,r.a.createElement(Be.a,{title:"Update",className:"btn btn-theme btn-labeled",onClick:function(){return function(){var e={order_id:Y,paid_amount:Ae,disposal:ct,cheque:mt};A()({method:"post",url:B,data:Object(Ue.stringify)(e),headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json",Authorization:"Bearer ".concat(t.jwt_token)},withCredentials:!0}).then((function(e){200===e.status?(!0===e.data.success&&(Ve(!1),pt()),ut(e.data.message)):console.log("Network Error")}))}()},disabled:0===Ae},"Update")));return r.a.createElement(Re,{header:"All Orders"},St,kt,Ct,r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"row justify-content-between"},a?r.a.createElement("div",{className:"col-md-3"},r.a.createElement(Fe.a,{isOpen:W,toggle:function(){return V((function(e){return!e}))}},r.a.createElement(Ye.a,{caret:!0,className:"btn btn-theme btn-labeled w-100 text-right"},Qe(se)),r.a.createElement(qe.a,{style:{overflow:"auto",maxHeight:"20vh"},right:!0},p.map((function(e){return r.a.createElement(Je.a,{key:e.id,onClick:function(){!function(e){oe(e)}(e)}},Qe(e))}))))):"",r.a.createElement("div",{className:"col-md-3"},r.a.createElement(Fe.a,{isOpen:Q,toggle:function(){return X((function(e){return!e}))}},r.a.createElement(Ye.a,{caret:!0,className:"btn btn-theme btn-labeled w-100 text-right"},ue.name),r.a.createElement(qe.a,{style:{overflow:"auto",maxHeight:"20vh"},right:!0},ne.map((function(e){return r.a.createElement(Je.a,{key:e.id,onClick:function(){!function(e){pe(e)}(e)}},e.name)}))))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement(Fe.a,{isOpen:ee,toggle:function(){return te((function(e){return!e}))}},r.a.createElement(Ye.a,{caret:!0,className:"btn btn-theme btn-labeled w-100 text-right"},Ee),r.a.createElement(qe.a,{style:{overflow:"auto",maxHeight:"20vh"},right:!0},Nt.map((function(e){return r.a.createElement(Je.a,{key:e,onClick:function(){!function(e){he(e)}(e)}},e)}))))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement(Be.a,{title:"Filter Data",className:"btn btn-theme btn-labeled w-100",onClick:function(){return pt()}},r.a.createElement(Ne.a,{icon:["fas","filter"],className:"mr-2"}),"Filter Data"))))),yt.length>0?r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement(He.a,{headerFields:[{id:0,type:"action",sort:"sorting_asc",align:"text-left",name:"ACTIONS"},{id:2,type:"text",sort:"sorting",align:"text-left",name:"ORDER#"},{id:1,type:"text",align:"text-left",name:"TOTAL AMOUNT"},{id:3,type:"media",sort:"sorting",align:"text-left",name:"EMPLOYEE"},{id:4,type:"media",sort:"sorting",align:"text-left",name:"CUSTOMER"},{id:5,type:"text",sort:"sorting",align:"text-left",name:"ORDER DATE"},{id:6,type:"text",sort:"sorting",align:"text-left",name:"DELIVERY DATE"},{id:7,type:"text",sort:"sorting",align:"text-left",name:"REMAINING AMOUNT"},{id:8,type:"badge",sort:"sorting",align:"text-left",name:"STATUS"}],data:yt,showSno:!1,enableFilter:!0,pages:re,colors:ce}))):r.a.createElement("div",{className:"h-100 row align-items-center"},r.a.createElement("div",{className:"text-center col mb-5 pb-5"},r.a.createElement(Ze.a,{color:"#1861B8",size:20,loading:h}))))};var ht=function(e){var t=Object(n.useState)(!1),a=Object(ve.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)(!1),o=Object(ve.a)(s,2),i=o[0],m=o[1],d=Object(n.useState)(!1),u=Object(ve.a)(d,2),p=u[0],b=u[1],f=Object(n.useState)(""),E=Object(ve.a)(f,2),h=E[0],g=E[1],v=Object(n.useState)(""),N=Object(ve.a)(v,2),y=N[0],w=N[1],O=Object(n.useState)(""),j=Object(ve.a)(O,2),_=j[0],S=j[1],k=Object(n.useState)(""),x=Object(ve.a)(k,2),D=x[0],T=x[1],R=Object(n.useState)(""),P=Object(ve.a)(R,2),I=P[0],M=P[1],B=Object(n.useState)(!1),U=Object(ve.a)(B,2),z=U[0],F=U[1],Y=Object(n.useState)("Employee"),q=Object(ve.a)(Y,2),J=q[0],H=q[1],W=Object(n.useState)(!1),V=Object(ve.a)(W,2),K=V[0],G=V[1],Q=Object(n.useState)(""),X=Object(ve.a)(Q,2),Z=X[0],$=X[1],ee=r.a.createElement(Pe.a,{isOpen:c,toggle:ne},r.a.createElement(Ie.a,{toggle:ne},"Employee first name invalid"),r.a.createElement(Me.a,null,"Employee first name can not be empty."," ")),te=r.a.createElement(Pe.a,{isOpen:i,toggle:re},r.a.createElement(Ie.a,{toggle:re},"Employee user name invalid"),r.a.createElement(Me.a,null,"Username must be greater than 4 characters."," ")),ae=r.a.createElement(Pe.a,{isOpen:p,toggle:ce},r.a.createElement(Ie.a,{toggle:ce},"Message"),r.a.createElement(Me.a,null,Z," "));function ne(){l(!c)}function re(){m(!i)}function ce(){b(!p)}function le(){if(z)if(""===h)l(!0);else if(""===_)m(!0);else{var e={username:C.encode(_.trim()),password:C.encode(D),role:"admin"===J.toLowerCase()?"admin":"user",first_name:h,last_name:y};A.a.defaults.withCredentials=!0;var t=JSON.parse(sessionStorage.getItem("user"));A()({method:"post",url:L,data:Object(Ue.stringify)(e),headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json",Authorization:"Bearer "+t.jwt_token}}).then((function(e){200===e.status&&(!0===e.data.success?(S(""),g(""),w(""),T(""),M(""),w(""),H("Employee"),b(!0),$(e.data.message)):($(e.data.message),b(!0)))}))}}return Object(n.useEffect)((function(){F(I===D&&""!==D)}),[D,I]),r.a.createElement(Re,{header:"Add New Employee"},ee,te,ae,r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h4",{className:"card-title"},"Employee Detail"),r.a.createElement("div",{className:"row justify-content-around"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"font-weight-semibold"},"First Name"," ",r.a.createElement("span",{className:"c-failed",title:"Required"},"*")),r.a.createElement("input",{name:"FirstName",type:"text",className:"form-control",placeholder:"Enter First Name",value:h,onChange:function(e){return g(e.target.value)}}))),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"font-weight-semibold"},"Last Name"),r.a.createElement("input",{name:"LastName",type:"text",className:"form-control",placeholder:"Enter last Name",value:y,onChange:function(e){return w(e.target.value)}})))),r.a.createElement("div",{className:"row justify-content-around"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"font-weight-semibold"},"User Name"," ",r.a.createElement("span",{className:"c-failed",title:"Required"},"*")),r.a.createElement("input",{name:"UserName",type:"text",className:"form-control",placeholder:"Enter User Name",id:"username",value:_,onChange:function(e){return S(e.target.value)}}),r.a.createElement(Ve.a,{placement:"bottom",target:"username"},"This username will be used for logging in."))),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"font-weight-semibold"},"Role"," ",r.a.createElement("span",{className:"c-failed",title:"Required"},"*")),r.a.createElement(Fe.a,{isOpen:K,toggle:function(){return G((function(e){return!e}))},id:"userType"},r.a.createElement(Ye.a,{caret:!0,className:"btn btn-theme btn-labeled text-right w-100"},J),r.a.createElement(qe.a,{style:{overflow:"auto",maxHeight:"20vh"},value:J,className:"w-100"},[{id:1,name:"Employee"},{id:2,name:"Admin"}].map((function(e){return r.a.createElement(Je.a,{key:e.id,onClick:function(){return H(e.name)}},e.name)})))),r.a.createElement(Ve.a,{placement:"top",target:"userType"},"Permissions will be based on user type.")))),r.a.createElement("div",{className:"row justify-content-around"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"font-weight-semibold"},"Password"," ",r.a.createElement("span",{className:"c-failed",title:"Required"},"*")),r.a.createElement("input",{name:"Password",type:"password",id:"password",className:z?"form-control input-password-valid":"form-control input-password-invalid",placeholder:"Enter Password",value:D,onChange:function(e){return T(e.target.value)}}),r.a.createElement(Ve.a,{placement:"bottom",target:"password"},"Choose a password for employee."))),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"font-weight-semibold"},"Confirm Password"," ",r.a.createElement("span",{className:"c-failed",title:"Required"},"*")),r.a.createElement("input",{name:"ConfirmPassword",type:"password",id:"confirmPassword",className:z?"form-control input-password-valid":"form-control input-password-invalid",placeholder:"Confirm Password",value:I,onChange:function(e){return M(e.target.value)}}),r.a.createElement(Ve.a,{placement:"bottom",target:"confirmPassword"},"The two passwords should match.")))),r.a.createElement("div",{className:"row justify-content-around"},r.a.createElement("div",{className:"col-md-2"},r.a.createElement(Be.a,{title:"Add Employee",className:"btn btn-theme btn-labeled",size:"lg",block:!0,style:{marginTop:"50px",marginBottom:"40px"},onClick:function(){return le()},disabled:!z},"Add Employee"))))))},gt=a(239),vt=a(240);var Nt=Object(v.g)((function(e){var t=JSON.parse(sessionStorage.getItem("user")),a=Object(n.useState)(e.location.state.orderId),c=Object(ve.a)(a,2),l=c[0],s=c[1],o=Object(n.useState)({id:1,employee_id:1,customer_name:"Test",customer_phone_number:"+11 22 32323232",customer_trn:"3333232",advance_payment:"500",placement_date:"2020-04-01T19:00:00.000Z",order_status:"Incomplete",delivery_date:"2020-04-06T19:00:00.000Z",due_amount:"1234",remarks:"This is a sample order.",billed_amount:"1701",first_name:"John",last_name:"Legend"}),i=Object(ve.a)(o,2),m=i[0],d=i[1],u=Object(n.useState)([]),p=Object(ve.a)(u,2),b=p[0],f=p[1],E=Object(n.useState)([]),h=Object(ve.a)(E,2),g=h[0],v=h[1],N=Object(n.useState)(!1),y=Object(ve.a)(N,2),w=y[0],O=y[1],j=Object(n.useState)(!1),_=Object(ve.a)(j,2),S=_[0],k=_[1],C=Object(n.useState)(""),x=Object(ve.a)(C,2),D=x[0],T=x[1];function R(e){T(e),k(!0)}function P(){O(!w)}function I(){k(!S)}function M(){A()({method:"get",url:"".concat(q,"/").concat(l),headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json",Authorization:"Bearer ".concat(t.jwt_token)},withCredentials:!0}).then((function(e){if(200===e.status){if(!0===e.data.success){var t=e.data;d(t.order),f(t.payments),v(t.products)}}else console.log("Network Error")}))}function R(e){T(e),k(!0)}Object(n.useEffect)((function(){s(e.location.state.orderId),M()}),[e.location.state.orderId]);var B=r.a.createElement(Pe.a,{isOpen:S,toggle:I},r.a.createElement(Ie.a,{toggle:I},"Response"),r.a.createElement(Me.a,null,D)),U=r.a.createElement(Pe.a,{isOpen:w,toggle:P},r.a.createElement(Ie.a,{toggle:P},"Order Confirmation"),r.a.createElement(Me.a,null,r.a.createElement("h6",null,"Are you sure you want to cancel this order? This can not be undone."),r.a.createElement("div",{className:"row"},r.a.createElement(Be.a,{outline:!0,color:"danger",title:"Cancel Order",size:"lg",block:!0,onClick:function(){return function(){P();var e=JSON.parse(sessionStorage.getItem("user"));A.a.defaults.withCredentials=!0,A()({method:"get",url:"".concat(H,"/").concat(l),headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json",Authorization:"Bearer ".concat(e.jwt_token)},withCredentials:!0}).then((function(e){200===e.status?!0===e.data.success?(R(e.data.message),M()):R(e.data.message):console.log("Network Error")}))}()},disabled:"Cancelled"===m.order_status},"Yes! Cancel Order"),r.a.createElement(Be.a,{outline:!0,color:"success",title:"No",size:"lg",block:!0,onClick:function(){return P()}},"No"))));return r.a.createElement(Re,{header:"Order Detail"},U,B,r.a.createElement(ct.a,null,r.a.createElement(gt.a,null,r.a.createElement("div",{className:"row justify-content-around pb-3"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("label",{className:"font-weight-semibold"},"Order ID: "),r.a.createElement("input",{name:"OrderId",type:"text",className:"form-control",disabled:!0,value:l})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("label",{className:"font-weight-semibold"},"Customer Name: "),r.a.createElement("input",{name:"CustomerName",type:"text",className:"form-control",disabled:!0,value:m.customer_name})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("label",{className:"font-weight-semibold"},"Customer Number: "),r.a.createElement("input",{name:"CustomerNumber",type:"text",className:"form-control",disabled:!0,value:m.customer_phone_number})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("label",{className:"font-weight-semibold"},"Customer TRN: "),r.a.createElement("input",{name:"CustomerTRN",type:"text",className:"form-control",disabled:!0,value:m.customer_trn}))),r.a.createElement("div",{className:"row justify-content-around pb-3"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("label",{className:"font-weight-semibold"},"Placement Date: "),r.a.createElement("input",{name:"OrderId",type:"text",className:"form-control",disabled:!0,value:bt()(m.placement_date).format("DD-MM-YYYY")})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("label",{className:"font-weight-semibold"},"Delivery Date: "),r.a.createElement("input",{name:"CustomerName",type:"text",className:"form-control",disabled:!0,value:bt()(m.delivery_date).format("DD-MM-YYYY")})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("label",{className:"font-weight-semibold"},"Billed Amount: "),r.a.createElement("input",{name:"OrderId",type:"text",className:"form-control",disabled:!0,value:m.billed_amount+" AED"})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("label",{className:"font-weight-semibold"},"Remaining Amount: "),r.a.createElement("input",{name:"CustomerName",type:"text",className:"form-control",disabled:!0,value:m.due_amount+" AED"}))),r.a.createElement("div",{className:"row justify-content-around"},r.a.createElement("div",{className:"col-md-3"},r.a.createElement("label",{className:"font-weight-semibold"},"Remarks: "),r.a.createElement("textarea",{name:"Remarks",type:"text",className:"form-control",disabled:!0,value:m.remarks}))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(ct.a,null,r.a.createElement(gt.a,null,r.a.createElement("h6",{className:"font-weight-semibold"},"Products: "),r.a.createElement(vt.a,{responsive:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Type"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Quantity"),r.a.createElement("th",null,"Unit Price"))),r.a.createElement("tbody",null,g.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("th",{scope:"row"},t+1),r.a.createElement("td",null,e._type),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.quantity),r.a.createElement("td",null,e.unit_price+" AED"))}))))))),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(ct.a,null,r.a.createElement(gt.a,null,r.a.createElement("h6",{className:"font-weight-semibold"},"Payments: "),r.a.createElement(vt.a,{responsive:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Amount"),r.a.createElement("th",null,"Disposal"),r.a.createElement("th",null,"Remaining Amount"),r.a.createElement("th",null,"Type"))),r.a.createElement("tbody",null,b.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("th",{scope:"row"},t+1),r.a.createElement("td",null,bt()(e.date_of_payment).format("DD-MM-YYYY")),r.a.createElement("td",null,e.paid_amount+" AED"),r.a.createElement("td",null,e.cash_disposal),r.a.createElement("td",null,e.due_amount+" AED"),r.a.createElement("td",null,e.payment_type))})))))))),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-md-2 text-center"},r.a.createElement(ct.a,null,r.a.createElement(gt.a,null,r.a.createElement(Be.a,{outline:!0,color:"success",size:"lg",block:!0,onClick:function(){A()("".concat(J),{method:"POST",responseType:"blob",data:Object(Ue.stringify)({order_id:l})}).then((function(e){var t=new Blob([e.data],{type:"application/pdf"});Object(We.saveAs)(t,"Invoice for Job Order ".concat(l,".pdf"))})).catch((function(e){R(e)}))},id:"receiptOrderBtn"},"Order Receipt"),r.a.createElement(Ve.a,{placement:"bottom",target:"receiptOrderBtn"},"This will download order receipt.")))),r.a.createElement("div",{className:"col-md-2 text-center"},r.a.createElement(ct.a,null,r.a.createElement(gt.a,null,r.a.createElement(Be.a,{outline:!0,color:"danger",size:"lg",block:!0,onClick:function(){return O(!0)},disabled:"Cancelled"===m.order_status,id:"cancelOrderBtn"},"Cancel Order"),r.a.createElement(Ve.a,{placement:"bottom",target:"cancelOrderBtn"},"This will cancel order."))))))}));var yt=function(e){var t=Object(n.useState)(!1),a=Object(ve.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)(""),o=Object(ve.a)(s,2),i=o[0],m=o[1],d=Object(n.useState)(""),u=Object(ve.a)(d,2),p=u[0],b=u[1],f=Object(n.useState)(""),E=Object(ve.a)(f,2),h=E[0],g=E[1];function v(){var e=JSON.parse(sessionStorage.getItem("user"));A()({method:"get",url:X,headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json",Authorization:"Bearer ".concat(e.jwt_token)},withCredentials:!0}).then((function(e){200===e.status?!0===e.data.success?b(e.data.vat):y(e.data.message):console.log("Network Error")}))}function N(){var e=JSON.parse(sessionStorage.getItem("user"));A()({method:"get",url:$,headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json",Authorization:"Bearer ".concat(e.jwt_token)},withCredentials:!0}).then((function(e){200===e.status?!0===e.data.success?g(e.data.order_number):y(e.data.message):console.log("Network Error")}))}function y(e){m(e),l(!0)}function w(){l(!c)}Object(n.useEffect)((function(){v(),N()}),[]);var O=r.a.createElement(Pe.a,{isOpen:c,toggle:w},r.a.createElement(Ie.a,{toggle:w},"Response"),r.a.createElement(Me.a,null,i));return r.a.createElement(Re,{header:"Settings"},O,r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h4",{className:"card-title"},"Tax"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"font-weight-semibold"},"Tax %"," ",r.a.createElement("span",{className:"c-failed",title:"Required"},"*")),r.a.createElement("input",{type:"number",className:"form-control",placeholder:"Tax %",value:p,onChange:function(e){return b(e.target.value)}}))),r.a.createElement("div",{className:"col-md-4 align-self-end"},r.a.createElement("div",{className:"form-group"},r.a.createElement(Be.a,{title:"Set",className:"btn btn-theme btn-labeled",onClick:function(){return function(){var e=JSON.parse(sessionStorage.getItem("user"));A()({method:"post",url:Q,data:Object(Ue.stringify)({vat:p}),headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json",Authorization:"Bearer ".concat(e.jwt_token)},withCredentials:!0}).then((function(e){200===e.status?(!0===e.data.success&&v(),y(e.data.message)):console.log("Network Error")}))}()},disabled:""===p},"Update")))))),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("h4",{className:"card-title"},"Starting Order Number"),r.a.createElement("div",{className:"row "},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"font-weight-semibold"},"Starting Order Number"," ",r.a.createElement("span",{className:"c-failed",title:"Required"},"*")),r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Starting Order Number",value:h,onChange:function(e){return g(e.target.value)}}))),r.a.createElement("div",{className:"col-md-4 align-self-end"},r.a.createElement("div",{className:"form-group"},r.a.createElement(Be.a,{title:"Set",className:"btn btn-theme btn-labeled",onClick:function(){return function(){var e=JSON.parse(sessionStorage.getItem("user"));A()({method:"post",url:Z,data:Object(Ue.stringify)({order_number:h}),headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json",Authorization:"Bearer ".concat(e.jwt_token)},withCredentials:!0}).then((function(e){200===e.status?(!0===e.data.success&&N(),y(e.data.message)):console.log("Network Error")}))}()},disabled:""===h},"Update")))))))};var wt=function(e){var t=JSON.parse(sessionStorage.getItem("user")),a={id:0,first_name:"All",last_name:"Employees"},c=Object(n.useState)(!1),l=Object(ve.a)(c,2),s=l[0],o=l[1],i=Object(n.useState)(!1),m=Object(ve.a)(i,2),d=m[0],u=m[1],p=Object(n.useState)(!1),b=Object(ve.a)(p,2),f=b[0],E=b[1],h=Object(n.useState)([]),g=Object(ve.a)(h,2),v=g[0],N=g[1],y=Object(n.useState)(!1),w=Object(ve.a)(y,2),O=w[0],j=w[1],_=Object(n.useState)(""),S=Object(ve.a)(_,2),k=S[0],C=S[1],x=Object(n.useState)(a),D=Object(ve.a)(x,2),T=D[0],R=D[1],P=Object(n.useState)(new Date),I=Object(ve.a)(P,2),M=I[0],B=I[1],U=Object(n.useState)(ie[0]),L=Object(ve.a)(U,2),F=L[0],q=L[1],J=Object(n.useState)([]),H=Object(ve.a)(J,2),W=H[0],V=H[1];function K(e){C(e),j(!0)}function G(){j(!O)}Object(n.useEffect)((function(){"admin"===t.role&&A()({method:"get",url:z,headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json",Authorization:"Bearer ".concat(t.jwt_token)},withCredentials:!0}).then((function(e){200===e.status?!0===e.data.success?N([a].concat(Object(ze.a)(e.data.rows))):K(e.data.message):console.log("Network Error")}))}),[]);var Q=r.a.createElement(Pe.a,{isOpen:O,toggle:G},r.a.createElement(Ie.a,{toggle:G},"Response"),r.a.createElement(Me.a,null,k));return r.a.createElement("div",null,Q,r.a.createElement(ct.a,null,r.a.createElement(gt.a,null,r.a.createElement("h4",{className:"card-title"},"View Expenses"),r.a.createElement("div",{className:"row justify-content-center"},"admin"===t.role?r.a.createElement("div",{className:"col-md-3"},r.a.createElement(Fe.a,{isOpen:d,toggle:function(){return u((function(e){return!e}))}},r.a.createElement(Ye.a,{caret:!0,className:"btn btn-theme btn-labeled text-right w-100"},Qe(T)),r.a.createElement(qe.a,{style:{overflow:"auto",maxHeight:"20vh"},className:"w-100"},v.map((function(e,t){return r.a.createElement(Je.a,{key:t,onClick:function(){return R(e)}},Qe(e))}))))):"",r.a.createElement("div",{className:"col-md-3"},r.a.createElement(et.a,{className:"form-control",dateFormat:"MMMM d, yyyy",selected:M,onChange:function(e){B(e)},todayButton:"Today"})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement(Fe.a,{isOpen:f,toggle:function(){return E((function(e){return!e}))}},r.a.createElement(Ye.a,{caret:!0,className:"btn btn-theme btn-labeled text-right w-100"},F),r.a.createElement(qe.a,{style:{overflow:"auto",maxHeight:"20vh"},className:"w-100"},ie.map((function(e,t){return r.a.createElement(Je.a,{key:t,onClick:function(){return q(e)}},e)}))))),r.a.createElement("div",{className:"col-md-3"},r.a.createElement(Be.a,{title:"Add",className:"btn btn-theme btn-labeled w-100",onClick:function(){return function(){o(!0);var e={employee_id:"admin"===t.role?T.id:t.empID,date:Ke(M),sort_by:F};A()({method:"post",url:Y,data:Object(Ue.stringify)(e),headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json",Authorization:"Bearer ".concat(t.jwt_token)},withCredentials:!0}).then((function(e){o(!1),200===e.status?!0===e.data.success?V(e.data.rows):K(e.data.message):console.log("Network Error")})).catch((function(){o(!1)}))}()}},"Get Expenses"))),r.a.createElement("div",{className:"row"},W.length>0?r.a.createElement("div",{className:"card-body"},r.a.createElement(vt.a,{responsive:!0,hover:!0,bordered:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"DATE"),r.a.createElement("th",null,"EXPENSE TYPE"),r.a.createElement("th",null,"VEHICLE NUMBER"),r.a.createElement("th",null,"CASH ON HAND"),r.a.createElement("th",null,"EXPENSE AMOUNT"),r.a.createElement("th",null,"EMPLOYEE NAME"))),r.a.createElement("tbody",null,W.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("th",{scope:"row"},t+1),r.a.createElement("td",null,bt()(e.date_added).format("DD-MM-YYYY")),r.a.createElement("td",null,e.expenditure_type),r.a.createElement("td",null,e.vehicle_number?e.vehicle_number:"N/A"),r.a.createElement("td",null,e.balance+" AED"),r.a.createElement("td",null,e.amount_spent+" AED"),r.a.createElement("td",null,e.employee))}))))):r.a.createElement("div",{className:"text-center col mt-5"},r.a.createElement(Ze.a,{color:"#1861B8",size:20,loading:s}))))))};var Ot=function(e){var t=JSON.parse(sessionStorage.getItem("user")),a=Object(n.useState)(!1),c=Object(ve.a)(a,2),l=c[0],s=c[1],o=Object(n.useState)(!1),i=Object(ve.a)(o,2),m=i[0],d=i[1],u=Object(n.useState)(!1),p=Object(ve.a)(u,2),b=p[0],f=p[1],E=Object(n.useState)([]),h=Object(ve.a)(E,2),g=h[0],v=h[1],N=Object(n.useState)([]),y=Object(ve.a)(N,2),w=y[0],O=y[1],j=Object(n.useState)(0),_=Object(ve.a)(j,2),S=_[0],k=_[1],C=Object(n.useState)(0),x=Object(ve.a)(C,2),D=x[0],T=x[1],R=Object(n.useState)(new Date),P=Object(ve.a)(R,2),I=P[0],M=P[1],B=Object(n.useState)(!1),U=Object(ve.a)(B,2),L=U[0],Y=U[1],q=Object(n.useState)(""),J=Object(ve.a)(q,2),H=J[0],W=J[1],V=Object(n.useState)(""),K=Object(ve.a)(V,2),G=K[0],Q=K[1],X=Object(n.useState)(""),Z=Object(ve.a)(X,2),$=Z[0],te=Z[1],ae=Object(n.useState)("Select Vehicle Number"),ne=Object(ve.a)(ae,2),re=ne[0],ce=ne[1],le=Object(n.useState)("Select Expense Type"),se=Object(ve.a)(le,2),ie=se[0],me=se[1],de=Object(n.useState)({first_name:"Select",last_name:"Employee"}),ue=Object(ve.a)(de,2),pe=ue[0],be=ue[1];function fe(e){W(e),Y(!0)}function Ee(){Y(!L)}Object(n.useEffect)((function(){"admin"===t.role&&A()({method:"get",url:z,headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json",Authorization:"Bearer ".concat(t.jwt_token)},withCredentials:!0}).then((function(e){200===e.status?!0===e.data.success?v(e.data.rows):fe(e.data.message):console.log("Network Error")})),A()({method:"get",url:F,headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json",Authorization:"Bearer ".concat(t.jwt_token)},withCredentials:!0}).then((function(e){200===e.status?!0===e.data.success?O(e.data.rows):fe(e.data.message):console.log("Network Error")}))}),[]);var he=r.a.createElement(Pe.a,{isOpen:L,toggle:Ee},r.a.createElement(Ie.a,{toggle:Ee},"Response"),r.a.createElement(Me.a,null,H));return r.a.createElement("div",null,he,r.a.createElement(ct.a,null,r.a.createElement(gt.a,null,r.a.createElement("h4",{className:"card-title"},"Add Expense"),r.a.createElement("div",{className:"row justify-content-around"},"admin"===t.role?r.a.createElement("div",{className:"col-md-2"},r.a.createElement(Fe.a,{isOpen:b,toggle:function(){return f((function(e){return!e}))}},r.a.createElement(Ye.a,{caret:!0,className:"btn btn-theme btn-labeled text-right w-100"},Qe(pe)),r.a.createElement(qe.a,{style:{overflow:"auto",maxHeight:"20vh"},className:"w-100"},g.map((function(e,t){return r.a.createElement(Je.a,{key:t,onClick:function(){return be(e)}},Qe(e))}))))):"",r.a.createElement("div",{className:"col-md-2"},r.a.createElement(Fe.a,{isOpen:l,toggle:function(){return s((function(e){return!e}))}},r.a.createElement(Ye.a,{caret:!0,className:"btn btn-theme btn-labeled text-right w-100"},ie),r.a.createElement(qe.a,{style:{overflow:"auto",maxHeight:"20vh"},className:"w-100"},oe.map((function(e,t){return r.a.createElement(Je.a,{key:t,onClick:function(){return me(e)}},e)}))))),"Vehicle"===ie||"Petrol"===ie?r.a.createElement("div",{className:"col-md-2"},r.a.createElement(Fe.a,{isOpen:m,toggle:function(){return d((function(e){return!e}))}},r.a.createElement(Ye.a,{caret:!0,className:"btn btn-theme btn-labeled text-right w-100"},re),r.a.createElement(qe.a,{style:{overflow:"auto",maxHeight:"20vh"},className:"w-100"},w.map((function(e,t){return r.a.createElement(Je.a,{key:t,onClick:function(){return ce(e.id)}},e.vehicle_number)}))))):"","Other"===ie?r.a.createElement("div",{className:"col-md-2"},r.a.createElement("input",{disabled:"Other"!==ie,name:"Description",id:"Description",type:"text",className:"form-control",placeholder:"Description",value:G,onChange:function(e){return Q(e.target.value)}}),r.a.createElement(Ve.a,{placement:"bottom",target:"Description"},"Description")):"",r.a.createElement("div",{className:"col-md-2"},r.a.createElement(lt.a,{className:"form-control",id:"cashOnHand",suffix:" AED",precision:"0",value:D,onChangeEvent:function(e,t,a){return T(a)}}),r.a.createElement(Ve.a,{placement:"bottom",target:"cashOnHand"},"Cash On Hand")),r.a.createElement("div",{className:"col-md-2"},r.a.createElement(lt.a,{className:"form-control",id:"expenseAmount",suffix:" AED",precision:"0",value:S,onChangeEvent:function(e,t,a){return k(a)}}),r.a.createElement(Ve.a,{placement:"bottom",target:"expenseAmount"},"Expense Amount")),r.a.createElement("div",{className:"col-md-2"},r.a.createElement(et.a,{className:"form-control",id:"expenseDate",dateFormat:"MMMM d, yyyy",selected:I,onChange:function(e){M(e)},todayButton:"Today"}),r.a.createElement(Ve.a,{placement:"bottom",target:"expenseDate"},"Expense Date"))),r.a.createElement("div",{className:"row pt-4 justify-content-end"},r.a.createElement("div",{className:"col-md-2"},r.a.createElement("input",{name:"Bill number",id:"Bill",type:"text",className:"form-control",placeholder:"Bill number",value:$,onChange:function(e){return te(e.target.value)}}),r.a.createElement(Ve.a,{placement:"bottom",target:"Bill"},"Bill number")),r.a.createElement("div",{className:"col-md-3"},r.a.createElement(Be.a,{title:"Add",className:"btn btn-theme btn-labeled w-100",onClick:function(){return function(){var e={employee_id:"admin"===t.role?pe.id:t.empID,date_added:Ke(I),amount_spent:S,cash_on_hand:D,expense_type:ie,bill_number:$};"Vehicle"!==ie&&"Petrol"!==ie||(e.vehicle_id=re),"Other"===ie&&(e.description=G),A()({method:"post",url:ee,data:Object(Ue.stringify)(e),headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json",Authorization:"Bearer ".concat(t.jwt_token)},withCredentials:!0}).then((function(e){200===e.status?fe(e.data.message):console.log("Network Error")}))}()},disabled:0===S||"Select Expense Type"===ie||"admin"===t.role&&"Select"===pe.first_name||("Vehicle"===ie||"Petrol"===ie)&&"Select Vehicle Number"===re},"Add Expense"))))))};var jt=function(e){return r.a.createElement(Re,{header:"Expenses"},r.a.createElement(Ot,null),r.a.createElement(wt,null))},_t=function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return r.a.createElement(g.a,null,r.a.createElement(v.d,null,r.a.createElement(ue,{path:j,component:Ee}),r.a.createElement(ue,{exact:!0,path:_,component:ge}),r.a.createElement(ue,{exact:!0,path:"/change-password",component:Le}),r.a.createElement(ue,{exact:!0,path:"/",component:rt}),r.a.createElement(ue,{exact:!0,path:"/settings",component:yt}),r.a.createElement(ue,{exact:!0,path:"/expense",component:jt}),r.a.createElement(ue,{exact:!0,path:"/new-order",component:ut}),r.a.createElement(ue,{exact:!0,path:"/all-orders",component:Et}),r.a.createElement(ue,{exact:!0,path:"/order",component:Nt}),r.a.createElement(ue,{exact:!0,path:"/add-employee",component:ht})))}}]),t}(n.Component),St=Object(o.combineReducers)({activeUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"save_user":var a=t.payload.data;return Array.isArray(a)&&(a={message:"Something Went Wrong"}),a;default:return e}}}),kt=a(61),Ct=a(32),xt=a(75);kt.b.add(Ct.e,Ct.a,Ct.i,xt.b,Ct.d,Ct.f,xt.c,Ct.b,Ct.k,Ct.g,Ct.c,xt.a,Ct.j,Ct.h),a.d(t,"store",(function(){return At}));var At=Object(o.createStore)(St,Object(d.composeWithDevTools)(Object(o.applyMiddleware)(m.a,u.a)));l.a.render(r.a.createElement(s.a,{store:At},r.a.createElement(_t,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[122,1,2]]]);
//# sourceMappingURL=main.46c753b8.chunk.js.map